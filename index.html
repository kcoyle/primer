<!DOCTYPE html>
<html>
  <head>
    <title>Shape Expressions (ShEx) Primer</title>
    <meta charset='utf-8'></meta>
    <!-- <script src='https://www.w3.org/Tools/respec/respec-w3c-common' -->
    <!--         async="async" class='remove'></script> -->
    <script src='respec-w3c-common.js' async class='remove'></script>
    <link rel="stylesheet" href="local.css"/>

    <script class='remove'>
      var respecConfig = {
      specStatus: "base",
      shortName:  "shex-primer",
      edDraftURI: "https://w3c.github.io/data-shapes/primer/",
      editors: [
      {   name:       "Thomas Baker",
      company:    "Dublin Core Metadata Initiative",
      companyURL: "http://dublincore.org/" },
      {   name:       "Eric Prudâ€²hommeaux",
      url:        "http://www.w3.org/People/Eric/",
      company:    "W3C/MIT",
      companyURL: "http://www.w3.org/" }
      ],
      // wg:           "Shape Expressions ",
      // wgURI:        "https://shex.io/",
      // wgPublicList: "public-shex-dev",
      // wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/424242/status",
      };
    </script>
    <script src="jquery.min.js" type= "text/javascript"></script>
    <script type="text/javascript"><!--
function prepareHighlight (highlightables, onClass, offClass, slide) {
  if (slide === undefined)
    slide = $("body .namespace").last();
  $.each( highlightables, function( index, value ){
    var elts = slide.find( "."+value );
    elts
    .mouseenter(function() {
        elts.removeClass(offClass).addClass(onClass);
    })
    .mouseleave(function() {
        elts.removeClass(onClass).addClass(offClass);
    })
    .addClass(offClass);
  })
}
--> </script>
  </head>
  <body>

    <section id="abstract">
      <p>
        The Shape Expressions (ShEx) language describes RDF graph structures.
        A <code>shape</code> describes the triples touching nodes in RDF graphs.
        These descriptions identify predicates and their associated cardinalities and datatypes.
        ShEx shapes can be used to communicate data structures associated with some process or interface, generate or validate data, or drive user interfaces.
      </p>
      <p>
        This document introduces ShEx to people familiar with basic concepts of RDF[[rdf11-concepts]].
        This primer develops examples from an issue tracking application to introduce all major features of ShEx, including the construction of shapes and their correspondence with RDF graphs.
        This primer is a companion to the <a href="../spec/">language specification</a> that serves as a language reference and full specification.
      </p>    
    </section>

    <section id="conventions" class="introductory">
      <h4>Conventions used in this Primer</h4>
      <div>
      <p>
        @@@Most sections: ShEx Schema (in ShExC syntax by default), Passing Data, Failing Data, ?Data, Validation Result.
        Most examples support highlighting: mousing over elements in a schema or data example highlights corresponding explanatory text.
        @@@Use of "try it" buttons - link to rawgit.
      </p>
      <p>
        The ShEx schemas in this primer may be viewed in ShExC syntax (by default) or JSON-LD syntax by pressing 'c' or 'j' in the browser or by clicking on the following radio buttons:
      </p>
      <form id="langOptions" action=""><input type="radio" name="presLang" value="shexc" checked="checked">ShExC (press 'c')</input> <input type="radio" name="presLang" value="json">JSON (press 'j')</input> .</form>
      <!-- p class="note">[for editors] current switches:<br/>
      (<code>j</code>)son vs. shex(<code>c</code>).
      </p -->
      <p>
        Section 1 ("Quick Start") may be viewed as a separate document or as part of the full primer. <button id="standalone" disabled="disabled">view Quick Start as separate document</button>
      </p>
      <script type="text/javascript">
        var text_standAlone = "view Quick Start as separate document";
        var text_integrated = "view Quick Start integrated into the primer";
        var standingAlone = false;
        $("#standalone").removeAttr("disabled").on("click", standAlone).text(text_standAlone);
        function standAlone (evt) {
          if (standingAlone) {
            $(evt.target).closest("section").nextAll().show();
            $("#standalone").text(text_standAlone);
            standingAlone = false;
          } else {
            $(evt.target).closest("section").nextAll().hide();
            $("#standalone").text(text_integrated);
            standingAlone = true;
          }
        }
      </script>
      </div>
    </section>
    
    <section id="quickStart">
      <h2>Quick Start</h2>
      <div class="namespace">
        <p>
          Shape Expressions, or ShEx, is a language for describing an ideal RDF graph against which real RDF graphs can be compared.
          The description of an ideal RDF graph, or ShEx Schema, is tested against a given RDF data graph to yield a conformance test result, of validation result, that reports any mismatches between the ideal "shape" of the data and its actual contents.
        </p>
        <p>
          It's like the old joke about how to sculpt an elephant: "Take a block of marble and chip away everything that doesn't look like an elephant!"
          The simplest possible ShEx schema, <code>&lt;S&gt; {}</code>, which matches all possible RDF graphs, is like the block of marble.
          Just as each tap on the chisel "constrains" the marble block to look more like an elephant, each shape expression, shape, node constraint, or triple constraint defined in a ShEx schema restricts the collection of potential graphs to look more like the RDF data required for a particular process, interface, or application.
          The RDF data may be accessed in files or through APIs or SPARQL endpoints.
          The ShEx schema may be used for purposes ranging from data validation to the configuration of user interfaces.
          This primer focuses on the common use case of validating instance data.
        </p>
        <p>
        A ShEx schema is based on two fundamental constructs: the <span class="new">node constraint</span> and the <span class="new">triple constraint</span>.  The detailed keywords, grouping mechanisms, syntactic conventions, and matching procedures provided by the ShEx model may all be seen as modifying, qualifying, or contextualizing node constraints and triple constraints.
        </p>
        <p>
          Picture some RDF data about enrollees in a school.
          Data managers might want to ensure that each description of a student names one or two guardians, each of which has an assigned IRI to facilitate the merging of data about all children associated with a given guardian.
          The age of each student must fall between 13 and 20.
        </p>
        <p>
          The following ShEx schema has: one <span class="lookit">node constraint</span>, labeled with IRI <span class="shape-name">school:enrolleeAge</span>, for matching data nodes with an integer value between 13 and 20; and one <span class="lookit">triple constraint</span>, defined within a shape labeled with the IRI <span class="shape-name">school:Enrollee</span>, for matching one or two triples having the predicate <span class="type">ex:</span><span class="constant">hasGuardian</span>, where the triple has an IRI as its object (or "value"). 
          Data that conforms to these constraints will pass validation tests, and data that does not conform will fail.
        </p>
        <div id="example-school-enrolleeAge" class="example wrapper">
          <pre id="schema-school-enrolleeAge" class="schema shexc"><span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="function-name">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>

<span class="comment"># <span class="value-constraint new lookit">Node constraint</span></span>
<span class="shape-name">school:enrolleeAge</span> <span class="type">xsd:</span><span class="constant">integer</span> <span class="keyword">MinInclusive</span> 13 <span class="keyword">MaxInclusive</span> 20

<span class="shape-name">school:Enrollee</span> {
  <span class="comment"># <span class="value-constraint new lookit">Triple constraint</span></span>
  <span class="type">ex:</span><span class="constant">hasGuardian</span> <span class="keyword">IRI</span> {1,2}
}
</pre>
          <!-- JSON example -->
          <pre class="instance turtle pass tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="function-name">&lt;http://example.com/users/&gt;</span>

<span class="function-name">inst:Student1</span> <span class="type">ex:</span><span class="constant">hasGuardian</span>
  <span class="function-name">inst:Person2</span>, <span class="function-name">inst:Person3</span> .<a class="tryit" href="#schema-school-enrolleeAge" data-shape-map="inst:Student1@school:Enrollee">try it</a></pre>
          <pre class="instance turtle fail tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="function-name">&lt;http://example.com/users/&gt;</span>

<span class="function-name">inst:Student2</span> <span class="type">ex:</span><span class="constant">hasGuardian</span>
  <span class="function-name">inst:Person4</span>, <span class="function-name">inst:Person5</span>, <span class="function-name">inst:Person6</span> .<a class="tryit" href="#schema-school-enrolleeAge" data-shape-map="inst:Student2@school:Enrollee,inst:Student4@school:Enrollee">try it</a></pre>
        </div>
        <p>
        The next example adds a triple constraint on the data predicate foaf:age, which must have a value matching the node constraint <span class="constant">school:enrolleeAge</span>, which is cited in the triple constraint by reference.
        </p>
        <div id="simple-expressions-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" id="school-Enrollee1" style="float:left;">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="function-name">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="function-name">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

<span class="shape-name">school:enrolleeAge</span> <span class="type">xsd:</span><span class="constant">integer</span> MinInclusive 13 MaxInclusive 20 

<span class="shape-name">school:Enrollee</span> {
  <span class="type">foaf:</span><span class="constant">age</span> @<span class="shape-name">school:enrolleeAge</span> ;
  <span class="type">ex:</span><span class="constant">hasGuardian</span> <span class="keyword">IRI</span> {1,2}
}
          </pre>
            <pre class="instance turtle pass tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="function-name">&lt;http://example.com/users/&gt;</span>
PREFIX school: &lt;http://school.example/#&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

inst:Alice foaf:age 13 ;
  <span class="type">ex:</span><span class="constant">hasGuardian</span> inst:Person2, inst:Person3 .
inst:Bob foaf:age 15 ;
  <span class="type">ex:</span><span class="constant">hasGuardian</span> inst:Person4 .
<a class="tryit" href="#school-Enrollee1" data-shape-map="inst:Alice@school:Enrollee,inst:Bob@school:Enrollee">try it</a></pre>

            <pre class="instance turtle fail tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="function-name">&lt;http://example.com/users/&gt;</span>
PREFIX school: &lt;http://school.example/#&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

inst:Claire foaf:age 12 ;
  <span class="type">ex:</span><span class="constant">hasGuardian</span> inst:Person5 .
inst:Don foaf:age 14 .
<a class="tryit" href="#school-Enrollee1" data-shape-map="inst:Claire@school:Enrollee,inst:Don@school:Enrollee">try it</a></pre>
          <div style="clear:both;"></div>
        </div>

        <p>
          When this ShEx schema is tested against the RDF data, four RDF data nodes (<span class="function-name">inst:Alice</span>, <span class="function-name">inst:Bob</span>, <span class="function-name">inst:Claire</span>, <span class="function-name">inst:Don</span>) are evaluated against a single shape (<a href="#schema-school-enrolleeAge" class="shape-name">school:Enrollee</a>) to yield a <span class="new">validation result</span>, summarized below.  Implementations of ShEx may be configured to provide validation results in other formats and at different levels of verbosity.
        </p>
        <table class="example results">
          <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
          <tr class="pass"><td>school:Enrollee</td><td>inst:Alice </td><td>pass</td><td class="noreason"></td></tr>
          <tr class="pass"><td>school:Enrollee</td><td>inst:Bob   </td><td>pass</td><td class="noreason"></td></tr>
          <tr class="fail"><td>school:Enrollee</td><td>inst:Claire</td><td>fail</td><td class="fail">No <code>foaf:age</code> supplied.</td></tr>
          <tr class="fail"><td>school:Enrollee</td><td>inst:Don   </td><td>fail</td><td class="fail"><code>foaf:age</code> 14 greater than 13.</td></tr>
        </tbody></table>
      </div>
    </section>
    <script type="text/javascript">
      <!--
        setTimeout(tryitURLs, 2000);
        function tryitURLs () {
          $(".tryit").map((idx, elt) => {
            var e = $(elt);
            var schema = $(e.attr("href")).text().replace(/^#.*?\n/, "");
            var data = $(elt).parent().text();
            data = data.replace(/^\n +/, "").replace(/ *\n?try it\n? */g, "");
            e.attr("href", "http://rawgit.com/shexSpec/shex.js/master/doc/shex-simple.html?" + [
              "interface=simple",
              "schema=" + encodeURIComponent(schema),
              "data=" + encodeURIComponent(data),
              "shape-map=" + encodeURIComponent(e.attr("data-shape-map"))
            ].join("&"));
          })
        }
      -->
    </script>

      <section id="essentials">
        <h2>ShEx Model and Terminology</h2>

      <section id="validation">
          <h2>Validating RDF Data</h2>
          <p>
            Most applications that share data do so using prescribed data structures.
            While RDFS and OWL enable one to make assertions about the objects in some domain, ShEx describes data structures.
            (See Section 5, "Relationship of ShEx to RDF and OWL" for more details.)
            A ShEx schema:
          </p>
          <ul>
            <li>Uses an intuitive, domain-specific language for describing graph structures.</li>
            <li>Can be expressed as a portable JSON-LD structure.</li>
            <li>Provides constraints on the number and object type of triples with a specified predicate.</li>
            <li>Specifies value sets and simple set operations on lists of RDF terms.</li>
            <li>Supports XML Schema facet constraints on RDF data nodes.</li>
            <li>Allows logical algebraic combinations of constraints on nodes and triples.</li>
          </ul>

          <div id="associating-nodes-with-shapes">
            <!-- <h3>Associating Nodes with Shapes</h3> -->
            <p>
              While ShEx schemas have many uses, they can all be described in terms of a validation process.
              For instance, when ShEx is used to document data structures for a SPARQL database or service interface, the schema defines the set of RDF graphs involved in that service.
            </p>
            <p>
            The ShEx validation process is controlled by a <span class="new">shape map</span> that specifies how the constructs of a ShEx schema relate to the components of RDF data graphs.  The methods for constructing and expressing shape maps, which include the selection of node-shape pairs by means of queries, APIs, protocols, manual selection, or by the use of <a href="http://w3c.github.io/data-shapes/shacl/#targets">SHACL "target" properties</a>, is beyond the scope of this primer.
            </p>
          </div>

      </section>

      <section id="shexmodel">
        <h2>The ShEx Model</h2>
        <p>
          In the Shape Expressions model, RDF data is seen from the standpoint of its structural components, or abstract syntax.
          An <span class="new">RDF graph</span> is a collection of triples.
          A <span class="new">triple</span> is a data structure composed of three RDF terms.
          An <span class="new">RDF term</span> may be an <span class="new">IRI</span>, <span class="new">blank node (BNode)</span>, or <span class="new">literal</span>.
          In a triple, RDF terms are arranged in a fixed order, or <span class="new">directed arc</span>, from <span class="new">subject</span> to <span class="new">predicate</span> to <span class="new">object</span>.
          From the standpoint of ShEx, a triple may be seen as having an <span class="new">outgoing arc</span> from a subject or an <span class="new">incoming arc</span> to an object.
          RDF data may be serialized in any of several interchangeable concrete syntaxes designed for a variety of application requirements.
          Readers unfamiliar with any of these terms may want to consult <a href="https://www.w3.org/TR/rdf11-primer/">an RDF primer</a> before continuing with the rest of this primer.[[rdf11-primer]]
          The relationship between ShEx and RDF is discussed in more detail in <a href="#relationship">section 5</a>.
        </p>
        <p>
          ShEx provides a language for describing an RDF graph in terms of the abstract-syntactic components enumerated above.
          A <span class="new">ShEx Schema</span>, the counterpart of an RDF Graph, is a collection of shape expressions.
          A <span class="new">shape expression</span> is a logical combination of node constraints and shapes.
          <span class="new">Node constraints</span> define the characteristics of matching RDF nodes.
          A <span class="new">shape</span> describes a collection of RDF triples touching a given RDF node in terms of <span class="new">triple constraints</span> that specify a matching RDF triple in terms of its predicate, direction (whether it is an incoming or outgoing arc with respect to a node), cardinality (how many triples should match), or value (characteristics of the RDF object node).
        </p>
        <p>
        In the <span class="new">ShEx Model</span>, a given RDF Data Graph is tested against a ShEx Schema to yield a <span class="new">Validation Result</span>.
          In the <a href="#simple-expressions-example-1">example above</a>, the RDF data nodes <span class="function-name">inst:Alice</span>, <span class="function-name">inst:Bob</span>, <span class="function-name">inst:Claire</span> and <span class="function-name">inst:Don</span> are tested against a simple ShEx shape labeled <a href="#schema-school-enrolleeAge" class="shape-name">school:Enrollee</a>.
          In the validation process, each of four nodes in the RDF data is treated, in turn, as a <span class="new">focus node</span>, and triples involving that node are tested against a <span class="new">triple constraint</span>.
          This triple constraint has a single <span class="new">node constraint</span>: a <span class="new">literal datatype</span> constraint asserting that the object of a matching triple is of type <code class="string">xsd:string</code>.
        </p>
        <p>
          ShEx may be serialized using any of three interchangeable concrete syntaxes: 
          <a href=" https://github.com/shexSpec/grammar/blob/master/ShExDoc.g4">Shape Expressions Compact Syntax</a> 
          or <span class="new">ShExC</span>, a compact syntax meant for human eyes and fingers; 
          <span class="new">ShExJ</span>, a JSON-LD[[json-ld]] (Javascript) syntax meant for machine processing; and <span class="new">ShExR</span>, the RDF interpretation of ShExJ expressed in RDF Turtle syntax[[turtle]].
        </p>
      </section>

      <section id="vocabulary">
        <h2>Basic Terminology</h2>
        <dl>
          <dt id="vocab-schema">ShEx schema</dt><dd>A collection of shape expressions.</dd>
          <dt id="vocab-shape-expression">shape expression</dt><dd>A collection of shapes and of node constraints, possibly combined with AND, OR, and NOT expressions.</dd>
          <dt id="vocab-shape">shape</dt><dd>A collection of constraints on the triples which have the focus node as the subject or object.</dd>
          <dt id="vocab-triple-expression">triple expression</dt><dd>A collection of triple constraints, to be taken as a group or as a set of choices.</dd>
          <dt id="vocab-triple-constraint">triple constraint</dt><dd>A constraint on the predicate of a triple with the focus node as subject (or object, for <a href="#inverse-properties">inverse triple constraints</a>).</dd>
          <dt id="vocab-node-constraint">node constraint</dt><dd>A collection of constraints on a given focus node.</dd>
          <dt id="vocab-focus-node">focus node</dt><dd>A RDF data node of interest that is examined during validation.</dd>
          <dt id="vocab-value-constraint">value constraint</dt><dd>A shape expression used in a triple constraint. "Value constraint" (or "value constraint on a property") is a shorthand way of saying: "node constraint on the RDF node of the object associated in a triple with a given predicate".
          For inverse triple constraints, "node constraint on the RDF node of the subject associated in a triple with a given predicate".</dd>
          <dt id="vocab-value-set">value set</dt><dd>A set of RDF terms constructed by enumeration or patterns used for testing a focus node.</dd>
          <dt id="vocab-constraint">constraint</dt><dd>A restriction on the set of permissible nodes or triples.</dd>
          <dt id="vocab-shapeMap">shape map</dt><dd>A collection of pairs of RDF data nodes and ShEx shapes that is used for invoking validation and reporting results.</dd>
          <dt id="vocab-shexc">ShExC</dt><dd>A compact syntax meant for human eyes and fingers.</dd> 
          <dt id="vocab-shexj">ShExJ</dt><dd>A JSON-LD[[json-ld]] representation meant for machine processing.</dd> 
          <dt id="vocab-shexr">ShExR</dt><dd>The RDF interpretation of ShExJ expressed in RDF Turtle syntax[[turtle]].</dd> 
        </dl>

      </section>

      </section>

      <section id="tripleConstraints">
        <h2>ShEx Essentials</h2>
          <p>
            This document uses a running example illustrated by the following graph in which an Issue which is submitted by some person and potentially assigned to the same person or someone else.
            These issues can have a status of <code>unassigned</code> or <code>assigned</code>.
          </p>
<svg
   preserveAspectRatio="xMinYMin meet"
   viewBox="0 0 466 151"
   width="866"
   height="251"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   fill-opacity="0"
   color-rendering="auto"
   color-interpolation="auto"
   stroke="rgb(0,0,0)"
   text-rendering="auto"
   stroke-linecap="square"
   stroke-miterlimit="10"
   stroke-opacity="0"
   shape-rendering="auto"
   fill="rgb(0,0,0)"
   stroke-dasharray="none"
   font-weight="normal"
   stroke-width="1"
   font-family="'Dialog'"
   font-style="normal"
   stroke-linejoin="miter"
   font-size="12"
   stroke-dashoffset="0"
   image-rendering="auto"
   id="svg3351"
   version="1.1"
   inkscape:version="0.48.4 r9939"
   sodipodi:docname="ex1.svg">
  <metadata
     id="metadata3536">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1058"
     id="namedview3534"
     showgrid="false"
     inkscape:zoom="2.0879376"
     inkscape:cx="260.34707"
     inkscape:cy="41.69783"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer2" />
  <!--Generated by the Batik Graphics2D SVG Generator-->
  <defs
     id="genericDefs">
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow2Mend"
       style="overflow:visible;">
      <path
         id="path4575"
         style="fill-rule:evenodd;stroke-width:0.62500000;stroke-linejoin:round;"
         d="M 8.7185878,4.0337352 L -2.2072895,0.016013256 L 8.7185884,-4.0017078 C 6.9730900,-1.6296469 6.9831476,1.6157441 8.7185878,4.0337352 z "
         transform="scale(0.6) rotate(180) translate(0,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Send"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Send"
       style="overflow:visible;">
      <path
         id="path4563"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.2) rotate(180) translate(6,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Lend"
       style="overflow:visible;">
      <path
         id="path4551"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.8) rotate(180) translate(12.5,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Mend"
       style="overflow:visible;">
      <path
         id="path4557"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.4) rotate(180) translate(10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow2Mend-7"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4575-8"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7228"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path7230"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-9"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-4"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow2Mend-0"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4575-2"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-7"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-8"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-91"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-41"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
  </defs>
  <g
     id="g3354">
    <defs
       id="defs1">
      <linearGradient
         x1="65"
         gradientUnits="userSpaceOnUse"
         x2="65"
         y1="100"
         y2="0"
         id="linearGradient1"
         spreadMethod="reflect">
        <stop
           stop-opacity="1"
           stop-color="rgb(118,148,200)"
           offset="0%"
           id="stop3358" />
        <stop
           stop-opacity="1"
           stop-color="rgb(238,243,251)"
           offset="100%"
           id="stop3360" />
      </linearGradient>
      <linearGradient
         x1="85"
         gradientUnits="userSpaceOnUse"
         x2="85"
         y1="100"
         y2="0"
         id="linearGradient2"
         spreadMethod="reflect">
        <stop
           stop-opacity="1"
           stop-color="rgb(118,148,200)"
           offset="0%"
           id="stop3363" />
        <stop
           stop-opacity="1"
           stop-color="rgb(238,243,251)"
           offset="100%"
           id="stop3365" />
      </linearGradient>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath1">
        <path
           d="M-7 -7 L141 -7 L141 111 L-7 111 L-7 -7 Z"
           id="path3368" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath2">
        <path
           d="M0 0 L0 85 L130 85 L130 0 Z"
           id="path3371" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath3">
        <path
           d="M0 0 L130 0 L130 15 L0 15 L0 0 Z"
           id="path3374" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath4">
        <path
           d="M-7 -7 L181 -7 L181 111 L-7 111 L-7 -7 Z"
           id="path3377" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath5">
        <path
           d="M0 0 L0 85 L170 85 L170 0 Z"
           id="path3380" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath6">
        <path
           d="M0 0 L170 0 L170 15 L0 15 L0 0 Z"
           id="path3383" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath7">
        <path
           d="M-7 -7 L48 -7 L48 26 L-7 26 L-7 -7 Z"
           id="path3386" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath8">
        <path
           d="M0 0 L37 0 L37 15 L0 15 L0 0 Z"
           id="path3389" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath9">
        <path
           d="M-7 -7 L50 -7 L50 26 L-7 26 L-7 -7 Z"
           id="path3392" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath10">
        <path
           d="M0 0 L39 0 L39 15 L0 15 L0 0 Z"
           id="path3395" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath11">
        <path
           d="M-7 -7 L37 -7 L37 27 L-7 27 L-7 -7 Z"
           id="path3398" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath12">
        <path
           d="M0 0 L26 0 L26 16 L0 16 L0 0 Z"
           id="path3401" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath13">
        <path
           d="M-7 -7 L47 -7 L47 26 L-7 26 L-7 -7 Z"
           id="path3404" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath14">
        <path
           d="M0 0 L36 0 L36 15 L0 15 L0 0 Z"
           id="path3407" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath15">
        <path
           d="M-7 -7 L49 -7 L49 26 L-7 26 L-7 -7 Z"
           id="path3410" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath16">
        <path
           d="M0 0 L38 0 L38 15 L0 15 L0 0 Z"
           id="path3413" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath17">
        <path
           d="M0 0 L171 0 L171 52 L0 52 L0 0 Z"
           id="path3416" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath18">
        <path
           d="M0 0 L162 0 L162 112 L0 112 L0 0 Z"
           id="path3419" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath19">
        <path
           d="M-77 -15 L154 -15 L154 30 L-77 30 L-77 -15 Z"
           id="path3422" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath20">
        <path
           d="M-92 -15 L184 -15 L184 30 L-92 30 L-92 -15 Z"
           id="path3425" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath21">
        <path
           d="M-57 -15 L114 -15 L114 30 L-57 30 L-57 -15 Z"
           id="path3428" />
      </clipPath>
    </defs>
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer1"
     inkscape:label="UML"
     style="display:none">
    <g
       text-rendering="geometricPrecision"
       id="g3430"
       style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-opacity:1">
      <rect
         x="0"
         width="466"
         height="151"
         y="0"
         id="rect3432"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3434"
       style="font-size:11px;font-weight:bold;fill:url(#linearGradient1);fill-opacity:1;stroke:url(#linearGradient1);stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="130"
         height="100"
         y="0"
         clip-path="url(#clipPath1)"
         id="rect3436"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       stroke-miterlimit="0"
       id="g3438"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="130"
         height="100"
         y="0"
         clip-path="url(#clipPath1)"
         id="rect3440"
         style="fill:none" />
      <line
         y2="15"
         x1="0"
         clip-path="url(#clipPath1)"
         x2="130"
         y1="15"
         id="line3442"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,17)"
       text-rendering="geometricPrecision"
       id="g3444"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="14"
         clip-path="url(#clipPath2)"
         id="text3446"
         style="stroke:none"> :name : xsd:string</text>
    </g>
    <g
       font-size="11"
       transform="translate(332,17)"
       text-rendering="geometricPrecision"
       id="g3448"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <!--
<text x="2" xml:space="preserve" y="29" clip-path="url(#clipPath2)" stroke="none"
      > :givenName : xsd:string</text
      ><text x="2" xml:space="preserve" y="44" clip-path="url(#clipPath2)" stroke="none"
      > :familyName : xsd:string</text
      >
-->
      <text
         x="2"
         xml:space="preserve"
         y="59"
         clip-path="url(#clipPath2)"
         id="text3450"
         style="stroke:none"> :mbox : AnyURI</text>
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3452"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="50"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath3)"
         id="text3454"
         style="stroke:none">:User</text>
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3456"
       style="font-size:11px;font-weight:bold;fill:url(#linearGradient2);fill-opacity:1;stroke:url(#linearGradient2);stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="170"
         height="100"
         y="0"
         clip-path="url(#clipPath4)"
         id="rect3458"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       stroke-miterlimit="0"
       id="g3460"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="170"
         height="100"
         y="0"
         clip-path="url(#clipPath4)"
         id="rect3462"
         style="fill:none" />
      <line
         y2="15"
         x1="0"
         clip-path="url(#clipPath4)"
         x2="170"
         y1="15"
         id="line3464"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(42,17)"
       text-rendering="geometricPrecision"
       id="g3466"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="14"
         clip-path="url(#clipPath5)"
         id="text3468"
         style="stroke:none"> :status = Assigned|Unassigned</text>
    </g>
    <g
       font-size="11"
       transform="translate(42,17)"
       text-rendering="geometricPrecision"
       id="g3470"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="29"
         clip-path="url(#clipPath5)"
         id="text3472"
         style="stroke:none"> :reportedOn : xsd:dateTime</text>
      <!-- 
<text x="2" xml:space="preserve" y="44" clip-path="url(#clipPath5)" stroke="none"
      > :assignedOn : xsd:dateTime?</text
    >
-->
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3474"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="69"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath6)"
         id="text3476"
         style="stroke:none">:Issue</text>
    </g>
    <g
       font-size="11"
       transform="translate(212,62)"
       text-rendering="geometricPrecision"
       id="g3478"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath8)"
         id="text3480"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(302,62)"
       text-rendering="geometricPrecision"
       id="g3482"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath10)"
         id="text3484"
         style="stroke:none">0..1</text>
    </g>
    <g
       font-size="11"
       transform="translate(312,22)"
       text-rendering="geometricPrecision"
       id="g3486"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath12)"
         id="text3488"
         style="stroke:none">1</text>
    </g>
    <g
       font-size="11"
       transform="translate(212,22)"
       text-rendering="geometricPrecision"
       id="g3490"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath8)"
         id="text3492"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(122,102)"
       text-rendering="geometricPrecision"
       id="g3494"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="9"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath14)"
         id="text3496"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(2,52)"
       text-rendering="geometricPrecision"
       id="g3498"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath16)"
         id="text3500"
         style="stroke:none">0..1</text>
    </g>
    <g
       font-size="11"
       transform="translate(188,18)"
       text-rendering="geometricPrecision"
       id="g3502"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="24"
         x1="143"
         clip-path="url(#clipPath17)"
         x2="24"
         y1="24"
         id="line3504"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(189,58)"
       text-rendering="geometricPrecision"
       id="g3506"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath17)"
         x2="143"
         y1="24"
         id="line3508"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(-12,48)"
       text-rendering="geometricPrecision"
       id="g3510"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="84"
         x1="134"
         clip-path="url(#clipPath18)"
         x2="134"
         y1="55"
         id="line3512"
         style="fill:none" />
      <line
         y2="84"
         x1="134"
         clip-path="url(#clipPath18)"
         x2="24"
         y1="84"
         id="line3514"
         style="fill:none" />
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath18)"
         x2="24"
         y1="84"
         id="line3516"
         style="fill:none" />
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath18)"
         x2="53"
         y1="24"
         id="line3518"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(232,42)"
       text-rendering="geometricPrecision"
       id="g3520"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath19)"
         id="text3522"
         style="stroke:none">:reportedBy</text>
    </g>
    <g
       font-size="11"
       transform="translate(222,82)"
       text-rendering="geometricPrecision"
       id="g3524"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath20)"
         id="text3526"
         style="stroke:none">:reproducedBy</text>
    </g>
    <g
       font-size="11"
       transform="translate(22,132)"
       text-rendering="geometricPrecision"
       id="g3528"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath21)"
         id="text3530"
         style="stroke:none">:related</text>
    </g>
    <g
       text-rendering="geometricPrecision"
       font-size="10"
       id="g3532"
       style="font-size:10px;fill:#787878;fill-opacity:1;stroke:#787878;stroke-opacity:1" />
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer2"
     inkscape:label="Example"
     style="display:inline">
    <g
       font-size="11"
       transform="translate(-56.889536,21.96221)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g4526"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="69"
         xml:space="preserve"
         y="12"
         id="text4528"
         style="stroke:none">some:Issue</text>
    </g>
    <path
       sodipodi:type="arc"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       id="ex1_Issue"
       sodipodi:cx="114.80669"
       sodipodi:cy="29.75872"
       sodipodi:rx="94.486916"
       sodipodi:ry="34.543606"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       transform="matrix(0.48286072,0,0,0.54625635,-7.3455226,14.838586)" />
    <path
       transform="matrix(0.44712027,0,0,0.54653493,213.37109,14.830296)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif"
       id="g4532"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(163.11046,21.96221)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534"
         y="12"
         xml:space="preserve"
         x="69">some:User</text>
    </g>
    <path
       transform="matrix(0.62228098,0,0,0.54525881,170.58275,69.120974)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_Employee"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif"
       id="g4538"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(123.83726,76.214912)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4540"
         y="12"
         xml:space="preserve"
         x="69">some:Employee</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend)"
       d="M 88.052326,21.630814 142.9157,14.180232"
       id="ex1_state_p"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none"
       x="129.22105"
       y="24.197662"
       id="text6638"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640"
         x="129.22105"
         y="24.197662">ex:state</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="151.04359"
       y="12.148256"
       id="text6770"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6772"></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="148.3343"
       y="20.953487"
       id="text6774"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6776"></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#C83500;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="145.625"
       y="14.180232"
       id="text6778"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780"
         x="145.625"
         y="14.180232">ex:assigned</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend)"
       d="M 93.47093,31.113372 222.12171,29.64251"
       id="path6782"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="197.7518"
       y="30.791992"
       id="text6638-2"
       sodipodi:linespacing="125%"
       transform="matrix(0.99964189,-0.02676001,0.02676001,0.99964189,0,0)"
       inkscape:transform-center-x="-12.452479"><tspan
         sodipodi:role="line"
         id="tspan6640-4"
         x="197.7518"
         y="30.791992">ex:submittedBy</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend)"
       d="M 91.477829,37.251391 192.53449,74.608829"
       id="path7005"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="197.05046"
       y="0.80997449"
       id="text6638-2-3"
       sodipodi:linespacing="125%"
       transform="matrix(0.93991687,0.3414034,-0.3414034,0.93991687,0,0)"
       inkscape:transform-center-x="-11.239559"
       inkscape:transform-center-y="6.2266342"><tspan
         sodipodi:role="line"
         id="tspan6640-4-9"
         x="197.05046"
         y="0.80997449">ex:reproducedBy</tspan></text>
    <path
       transform="matrix(0.50272101,0,0,0.54610605,359.65638,22.934707)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User-2"
       style="fill:none;stroke:#000000;stroke-opacity:1;display:inline"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;display:inline;font-family:sans-serif"
       id="g4532-9"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(314.34227,30.053858)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534-9"
         y="12.478942"
         xml:space="preserve"
         x="58.463287">mailto:bob@...</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 301.46229,20.875275 54.86338,-7.450582"
       id="ex1_state_p-0"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="341.69205"
       y="44.207619"
       id="text6638-1"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640-44"
         x="341.69205"
         y="44.207619">foaf:name</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="359.03497"
       y="13.424692"
       id="text6778-6"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5"
         x="359.03497"
         y="13.424692">Bob Smith</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend);display:inline"
       d="m 306.8809,30.357833 61.12002,11.460559"
       id="path6782-3"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="368.17676"
       y="-18.619452"
       id="text6638-2-9"
       sodipodi:linespacing="125%"
       transform="matrix(0.98834834,0.15220895,-0.15220895,0.98834834,0,0)"
       inkscape:transform-center-x="-12.122235"
       inkscape:transform-center-y="2.0477642"><tspan
         sodipodi:role="line"
         id="tspan6640-4-1"
         x="368.17676"
         y="-18.619452">foaf:mbox</tspan></text>
    <rect
       style="fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect7302"
       width="47.415211"
       height="15.80507"
       x="356.81143"
       y="2.0491898" />
    <path
       transform="matrix(0.50272101,0,0,0.54610605,358.07589,113.95686)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User-2-3"
       style="fill:none;stroke:#000000;stroke-opacity:1;display:inline"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;display:inline;font-family:sans-serif"
       id="g4532-9-1"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(312.76178,121.07601)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534-9-4"
         y="12.478942"
         xml:space="preserve"
         x="58.463287">mailto:joe@...</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 295.65556,77.160936 120.5981,-8.288729"
       id="ex1_state_p-0-9"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="367.66379"
       y="102.81908"
       id="text6638-1-0"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640-44-1"
         x="367.66379"
         y="102.81908">foaf:givenName</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="419.22824"
       y="71.71035"
       id="text6778-6-7"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5-9"
         x="419.22824"
         y="71.71035">Joe</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend);display:inline"
       d="M 297.24264,91.432909 367.94149,126.3616"
       id="path6782-3-8"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="375.06934"
       y="-50.142578"
       id="text6638-2-9-2"
       sodipodi:linespacing="125%"
       transform="matrix(0.89968487,0.43653997,-0.43653997,0.89968487,0,0)"
       inkscape:transform-center-x="-10.671641"
       inkscape:transform-center-y="5.5748169"><tspan
         sodipodi:role="line"
         id="tspan6640-4-1-8"
         x="375.06934"
         y="-50.142578">foaf:mbox</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;display:inline"
       id="rect7302-7"
       width="19.157673"
       height="15.805073"
       x="417.0047"
       y="60.33485" />
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 300.92627,86.134992 134.48741,7.396605"
       id="ex1_state_p-0-9-2"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="423.10577"
       y="71.987328"
       id="text6638-1-0-0"
       sodipodi:linespacing="125%"
       transform="matrix(0.99914114,0.04143658,-0.04143658,0.99914114,0,0)"
       inkscape:transform-center-x="9.5788302"
       inkscape:transform-center-y="2.8736491"><tspan
         sodipodi:role="line"
         id="tspan6640-44-1-6"
         x="423.10577"
         y="71.987328">foaf:familyName</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="439.22638"
       y="95.05265"
       id="text6778-6-7-8"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5-9-7"
         x="439.22638"
         y="95.05265">Jones</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;display:inline"
       id="rect7302-7-1"
       width="29.454897"
       height="14.248512"
       x="436.1647"
       y="84.15609"
       ry="0" />
  </g>
</svg>

      <section id="nodeConstraints">
        <h2>Node Constraints</h2>
        <div class="namespace">
        <p>
          The following node constraints can be used alone, or in combination.
        </p>
        <dl>
          <dt id="vocab-literal-datatype" class="new">literal datatype</dt> <dd>A node constraint that identifies the datatype of an RDF literal.
          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  foaf:name <span class="value-constraint lookit">xsd:string</span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", "predicate": "foaf:name",
    "value": { "type": "NodeConstraint", <span class="value-constraint new lookit">"datatype": "xsd:string"</span> } } } }</pre>

          </dd>
          <dt id="vocab-literal-facets" class="new">literal facet</dt> <dd>A node constraint that applies <a href="http://www.w3.org/TR/xmlschema-2/#rf-facets">XML Schema constraining facets</a>, including <span class="new">numeric facets</span>, which apply only to numeric RDF literals (<code class="value-constraint">MinInclusive</code>, <code class="value-constraint">MinExclusive</code>, <code class="value-constraint">MaxInclusive</code>, <code class="value-constraint">MaxExclusive</code>, <code class="value-constraint">TotalDigits</code>, <code class="value-constraint">FractionDigits</code>) and <span class="new">string facets</span>, which apply to all RDF literals (<code class="value-constraint">Length</code>, <code class="value-constraint">MinLength</code>, <code class="value-constraint">MaxLength</code>, <code class="value-constraint">Pattern</code>).  In the ShExC syntax, facet names are not case-sensitive.

          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  ex:shoeSize xsd:float <span class="value-constraint new lookit">MinInclusive 5.5 maxInclusive 12.5</span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:shoeSize",
    "value": { "type": "NodeConstraint", "datatype": "http://www.w3.org/2001/XMLSchema#float",
               <span class="value-constraint new lookit">"mininclusive": 5.5, "maxinclusive": 12.5</span> } } } }</pre>

          </dd>
          <dt id="vocab-node-kind" class="new">node kind</dt> <dd>A node constraint that specifies whether an RDF data node is of kind <code class="value-constraint">Literal</code>, <code class="value-constraint">IRI</code>, <code class="value-constraint">BNode</code>, or <code class="value-constraint">NonLiteral</code>, a union of the kinds <code class="value-constraint">IRI</code> and <code class="value-constraint">BNode</code>.  In the ShExC syntax, node kinds are not case-sensitive.
          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  foaf:mbox <span class="value-constraint new lookit">IRI</span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", "predicate": "foaf:mbox",
    "value": { "type": "NodeConstraint", <span class="value-constraint new lookit">"nodeKind": "IRI"</span> } } } }</pre>

          </dd>
          <dt id="vocab-value-set" class="new">value set</dt> <dd>Enumerates a set of specific expected values.
          <pre class="schema shexc table"><span class="shape-name">my:IssueShape</span> {
  ex:state <span class="value-constraint new lookit">[ex:unassigned ex:assigned]</span>
}</pre>
          <pre class="schema json table">
{ "my:IssueShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="value-constraint new lookit">[ "ex:unassigned", "ex:assigned" ]</span> } } } }</pre>
          </dd>
          <dt id="value-shape" class="new">value shape</dt> <dd>Asserts that the object is described by another shape, e.g.
          <pre class="schema shexc table"><span class="shape-name">my:IssueShape</span> {
  ex:reportedBy <span class="value-constraint new lookit">@my:UserShape</span>
}</pre>
          <pre class="schema json">{ "my:IssueShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:reportedBy",
      "value": { "type": "ShapeRef", <span class="value-constraint new lookit">"reference": "my:PersonShape"</span> } } } }</pre>
          </dd>
        </dl>

        </div>
      </section>

      <section id="tripleConstraints">
        <h2>Triple Constraints</h2>
        <p>
          Triple constraints are evaluated against all of the triples in an RDF graph that touch a given data node.  
          The RDF data node examined during validation is called the <span class="new">focus node</span>.
          Triple constraints typically identify a predicate and describe matching triples as having the focus node as the subject in a triple with the given predicate.
          (The exception is the inverse triple constraint, which describes matching triples as having the focus node as the object.)
          Triple constraints may specify how many matching triples are required and what kinds of object are expected.
        </p>
        <p>
          The following simple example has one shape, <span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span>, with a single triple constraint on the property <span class="predicate">foaf:name</span>.
          A value constraint within the triple constraint says that the object of a foaf:name triple must be an RDF literal with a datatype of <span class="value-constraint hilight-valueConstraint lowlight2 top bot">xsd:string</span>.
          A conforming node in an RDF data graph will have exactly one such triple.
        </p>

        <div id="my:UserShape-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc"><span class="comment"># schema (ShExC)</span>
<span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span> {
  <span class="hilight-tripleConstraint lowlight1 top bot"><span class="predicate hilight-predicate lowlight2 top bot">foaf:name</span> <span class="value-constraint hilight-valueConstraint lowlight2 top bot">xsd:string</span></span>
}</pre>
          <!-- JSON example -->
          <pre class="schema json"><span class="comment">// schema (JSON)</span>
{
  <span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span>: {
    "type": "Shape",
    "expression": {
     <span class="hilight-tripleConstraint lowlight1 top"> "type": "TripleConstraint",</span>
     <span class="hilight-tripleConstraint lowlight1    "> <span class="predicate hilight-predicate lowlight2 top bot">"predicate": "foaf:name"</span>,  </span>
     <span class="hilight-tripleConstraint lowlight1    "> <span class="value-constraint hilight-valueConstraint lowlight2 top">"value": {                </span> </span>
     <span class="hilight-tripleConstraint lowlight1    "> <span class="value-constraint hilight-valueConstraint lowlight2    ">  "type": "NodeConstraint",   </span> </span>
     <span class="hilight-tripleConstraint lowlight1    "> <span class="value-constraint hilight-valueConstraint lowlight2    ">  "datatype": "xsd:string"</span> </span>
     <span class="hilight-tripleConstraint lowlight1 bot"> <span class="value-constraint hilight-valueConstraint lowlight2 bot">}                         </span> </span>
    }
  }
}</pre>

          <pre class="instance turtle pass">
<span id="inst:User1-1" class="function-name">inst:User1</span>
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>  <span class="string top bot">"Bob Smith"^^xsd:string</span></span> .
<span class="function-name">inst:User2</span>
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>  <span class="string top bot">"Bob Smith"</span></span> .</pre>

          <pre class="instance turtle fail">
<span id="inst:User3-1" class="function-name">inst:User3</span>
    <span class="gname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>  <span class="string top bot">"Joe Jones"^^xsd:string</span></span> ;
    <span class="errorSite">foaf:name  "Joseph Jones"^^xsd:string</span> .

<span id="inst:User4-1" class="function-name">inst:User4</span>
    <span class="gname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>  <span class="string top bot">"Bob Smith"^^<span class="errorSite">xsd:anyURI</span></span></span> .
</pre>

          </div>
          <div style="clear:both;"> </div>
          <table class="example results">
            <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
            <tr class="pass"><td>my:UserShape</td><td>inst:User1</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="pass"><td>my:UserShape</td><td>inst:User2</td><td>pass</td><td>Literals in Turtle have a default datatype of <span class="value-constraint">xsd:string</span>.</td></tr>
            <tr class="fail hilight-component top lowlight2"><td>my:UserShape</td><td>inst:User3</td><td>fail</td><td class="fail">Expected exactly one <span class="type">foaf:</span><span class="constant">name</span> arc.</td></tr>
            <tr class="fail hilight-component top lowlight2"><td>my:UserShape</td><td>inst:User5</td><td>fail</td><td class="fail">Expected an <span class="value-constraint hilight-valueConstraint lowlight2 top bot">xsd:string</span>, not a <span class="value-constraint hilight-valueConstraint lowlight2 top bot">xsd:anyURI</span>.</td></tr>
          </tbody></table>          

          <p>
            The following regular expression conventions are used to specify cardinalities other than the default of "exactly one" (see the <a href="#simple-expressions-example-1">example in Section 1</a>, with cardinality "one or two").
          </p>
          <ul>
            <li>"<span class="new">+</span>" - one or more</li>
            <li>"<span class="new">*</span>" - zero or more</li>
            <li>"<span class="new">?</span>" - zero or one</li>
            <li>"<span class="new">{m}</span>" - exactly m</li>
            <li>"<span class="new">{m,n}</span>" - at least m, no more than n</li>
          </ul>

        <script type="text/javascript">
        <!--
prepareHighlight(["hilight-shapeName", "hilight-predicate", "hilight-valueConstraint", "hilight-focusNodes"], "highlight2", "lowlight2");
prepareHighlight(["hilight-tripleConstraint"], "highlight1", "lowlight1");
        -->
        </script>
      </section>

      <section id="simple-expressions">
        <h2>Grouping Triple Constraints in Shapes</h2>
        <div class="namespace">
        <p>
          The examples above show just one triple constraint per shape but in practice, most shape declarations will include multiple constraints.
          In the ShExC syntax, triple constraints are separated by a semi-colon.
          In the following example, the shape my:IssueShape will match:
        </p>
      <ul>
        <li class="state lowlight1 top bot">exactly one data triple with predicate <span id="state" class="predicate">ex:state</span> and a value in the value set <span class="stateValue lowlight2 top bot value-constraint">ex:unassigned or ex:assigned</span>,</li>
        <li class="reportedBy lowlight1 top bot">exactly one data triple with predicate <span id="mbox" class="predicate">ex:reportedBy</span> and a value matching the shape labeled <span class="user lowlight2 top bot value-constraint">my:UserShape</span>.</li>
      </ul>
      <p>
        The shape labeled <span class="user lowlight2 top bot value-constraint">my:UserShape</span> must have:
      </p>
      <ul>
        <li class="name lowlight1 top bot">exactly one triple constraint on predicate <span id="name" class="predicate">foaf:name</span> with a value of the literal datatype <span class="string lowlight2 top bot"><span class="value-constraint">xsd:string</span></span></li>
        <li class="mbox lowlight1 top bot"><span class="oneOrMore lowlight2 top bot" id="oneOrMore">one or more</span> triple constraints on predicate <span id="mbox" class="predicate">foaf:mbox</span> with a <code>node kind</code> of <span class="IRI lowlight2 top bot value-constraint" id="IRI">IRI</span>.</li>
      </ul>

        <div id="simple-expressions-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span>
<span class="shape-name hilight-shapeName lowlight2 top bot">my:IssueShape</span> {
  <span class="state      lowlight1 top bot"><span class="predicate">ex:state</span> [<span class="stateValue lowlight2 top bot value-constraint">ex:unassigned ex:assigned</span>]</span>;
  <span class="reportedBy lowlight1 top bot"><span class="predicate">ex:reportedBy</span> <span class="value-constraint">@</span><span class="user lowlight2 top bot shape-name">my:UserShape</span></span>
}

<span class="user lowlight2 top bot shape-name">my:UserShape</span> {
  <span class="name       lowlight1 top bot"><span class="predicate">foaf:name</span> <span class="string lowlight2 top bot value-constraint">xsd:string</span></span>;
  <span class="mbox       lowlight1 top bot"><span class="predicate">foaf:mbox</span> <span class="IRI lowlight2 top bot value-constraint">IRI</span><span class="oneOrMore lowlight2 top bot">+</span></span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ "type": "Schema",
  "shapes": {
    <span class="shape-name hilight-shapeName lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="state      lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="state      lowlight1    ">  <span class="predicate">"predicate": "ex:state"</span>,                      </span>
          <span class="state      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",              </span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"ex:unassigned", "ex:assigned"</span> ]</span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">}                                             </span></span>
          <span class="state      lowlight1 bot">},                                              </span>
          <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="reportedBy lowlight1    ">  <span class="predicate">"predicate": "ex:reportedBy"</span>,                 </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">"value": { "type": "ShapeRef",</span>              </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">  "reference": <span class="user lowlight2 top bot">"my:UserShape"</span></span>                 </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">}              </span>                               </span>
          <span class="reportedBy lowlight1 bot">}                                               </span>
        ]
      }
    },
    <span class="user lowlight2 top bot">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="name       lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="name       lowlight1    ">  <span class="predicate">"predicate": "foaf:name"</span>,                     </span>
          <span class="name       lowlight1    ">  <span class="value-constraint">"value": {             </span>                       </span>
          <span class="name       lowlight1    ">  <span class="value-constraint">  "type": "NodeConstraint",</span>                       </span>
          <span class="name       lowlight1    ">  <span class="value-constraint">  "datatype": <span class="string lowlight2 top bot">"xsd:string"</span></span>                    </span>
          <span class="name       lowlight1    ">  <span class="value-constraint">}                      </span>                       </span>
          <span class="name       lowlight1 bot">},                                              </span>
          <span class="mbox       lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="mbox       lowlight1    ">  <span class="predicate">"predicate": "foaf:mbox"</span>,                     </span>
          <span class="mbox       lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              </span>
          <span class="mbox       lowlight1    ">  <span class="value-constraint">  "nodeKind": <span class="IRI lowlight2 top bot">"iri"</span>             </span>              </span>
          <span class="mbox       lowlight1    ">  <span class="value-constraint">},                                            </span></span>
          <span class="mbox       lowlight1    ">  <span class="value-constraint oneOrMore lowlight2 top bot">"min": 1, "max": "*"</span>                          </span>
          <span class="mbox       lowlight1 bot">}                                               </span>
        ]
      }
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle pass"><span class="comment"># passing data</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">http://ex.example/#</span><span class="comment">
</span><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="function-name">http://xmlns.com/foaf/</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">http://www.w3.org/2001/XMLSchema#</span><span class="comment">
</span>
<span class="function-name">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="stateValue lowlight2 top bot"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> ;
    <span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>   <span class="user lowlight2 top bot"><span class="function-name">inst:User2</span></span></span> .

<span class="user lowlight2 top bot"><span class="function-name">inst:User2</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span></span> ;
    <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span></span>.</pre>
          <pre class="instance turtle fail"><span class="comment"># failing data</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">http://ex.example/#</span><span class="comment">
</span><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="function-name">http://xmlns.com/foaf/</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">http://www.w3.org/2001/XMLSchema#</span><span class="comment">
</span>
<span class="function-name">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="stateValue lowlight2 top bot"><span class="type">ex:</span><span class="constant errorSite">unassigned</span></span></span> ;
    <span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>   <span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span></span> .

<span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span>, <span class="string top bot errorSite">"Robert Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span></span> ;
    <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span></span>.</pre>
  </div>
          <div style="clear:both;"></div>
      </div>
      <script type="text/javascript">
      <!--
prepareHighlight(["oneOrMore", "IRI", "stateValue", "user", "string"], "highlight2", "lowlight2");
prepareHighlight(["state", "reportedBy", "name", "mbox"], "highlight1", "lowlight1");
      -->
      </script>
      </div>

      <p>
        @@@The following text is very confusingly presented: "a shape... will match any literal or RDF node that does <em>not</em> appear in the data"?  How is it that "any literal would satisfy this shape"?
      </p>

      <p id="empty-shape">
        Note that a shape composed of triple expressions with a minimum cardinality of zero will match any literal or RDF node that does not appear in the data:
      </p>
      <pre class="schema shexc"><span class="shape-name">my:IssueShape</span> {
  <span class="type">ex:</span><span class="constant">state</span> [ex:unassigned ex:assigned] <span class="keyword">?</span>;
  <span class="type">ex:</span><span class="constant">reportedBy</span> @<span class="shape-name">my:UserShape</span> <span class="keyword">*</span>
}</pre>
      <p>
        For both properties, the minimum number of triples is zero so any RDF data node will match this shape as long as it does not have conflicting <span class="type">ex:</span><span class="constant">state</span> or <span class="type">ex:</span><span class="constant">reportedBy</span> properties.
        Since no RDF literal may be the subject of RDF triples, any literal would satisfy this shape.
      </p>
    </section>

      <section id="combined-constraints">
        <h3>Combining Value Constraints</h3>
        <div class="namespace">
          <p>
            Value constraints can be combined, for example to say that an issue is both identified by an IRI matching a certain pattern and conforms to a given shape.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span>
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:accepted ex:resolved</span>];
  <span class="predicate">ex:reproducedBy</span> <span class="hilight-reproducedBy lowlight2 top bot new"><span class="value-constraint">IRI @<span class="shape-name">my:EmployeeShape</span>
    /<span class="string">^http:\/\/hr.example/id#[0-9]+</span>/</span></span>
}

<span class="hilight-reproducedBy lowlight2 top"><span class="shape-name">my:EmployeeShape</span> {                        </span>
<span class="hilight-reproducedBy lowlight2    ">  <span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span>;                   </span>
<span class="hilight-reproducedBy lowlight2    ">  <span class="predicate">ex:department</span> [<span class="value-constraint">ex:ProgrammingDepartment</span>]</span>
<span class="hilight-reproducedBy lowlight2 bot">}                                         </span>
</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{
  "my:IssueShape": { "type": "Shape",
    "expression": { "type": "group",
      "expressions": [
        { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:state"</span>,
          <span class="value-constraint">"value": { "type": "NodeConstraint", "values": [ "ex:accepted", "ex:resolved" ]</span> }
        },
        { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:reproducedBy"</span>,
          <span class="value-constraint">"value": { "type": "ShapeRef", <span class="hilight-reproducedBy lowlight2 top bot">"reference": "my:TesterShape"</span></span> }
        }
      ]
    }
  },
  <span class="hilight-reproducedBy lowlight2 top">"my:EmployeeShape": { "type": "Shape",                                   </span>
  <span class="hilight-reproducedBy lowlight2    ">  "expression": { "type": "group",                                       </span>
  <span class="hilight-reproducedBy lowlight2    ">    "expressions": [                                                     </span>
  <span class="hilight-reproducedBy lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:name"</span>,            </span>
  <span class="hilight-reproducedBy lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>      </span>
  <span class="hilight-reproducedBy lowlight2    ">      },                                                                 </span>
  <span class="hilight-reproducedBy lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:department"</span>,        </span>
  <span class="hilight-reproducedBy lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "values": [ "ex:Programming" ] }</span></span>
  <span class="hilight-reproducedBy lowlight2    ">      }                                                                  </span>
  <span class="hilight-reproducedBy lowlight2    ">    ]                                                                    </span>
  <span class="hilight-reproducedBy lowlight2    ">  }                                                                      </span>
  <span class="hilight-reproducedBy lowlight2 bot">}                                                                        </span>
}</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
              <pre class="instance turtle pass"><span class="comment"># passing data</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-reproducedBy lowlight2 top bot"><span class="function-name">http://hr.example/id#123</span></span> .

<span class="hilight-reproducedBy lowlight2 top"><span class="function-name">http://hr.example/id#123</span>                  </span>
<span class="hilight-reproducedBy lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-reproducedBy lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
              <div></div>
              <pre class="instance turtle fail"><span class="comment"># failing data</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-reproducedBy lowlight2 top bot"><span class="function-name">http://hr.example/id#<span class="errorSite">abc</span></span></span> .

<span class="hilight-reproducedBy lowlight2 top"><span class="function-name">http://hr.example/id#abc</span>                  </span>
<span class="hilight-reproducedBy lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-reproducedBy lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
            </div>

            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-reproducedBy", "hilight-assignedTo"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </div>
        <p>
          @@@Validation Result here
        </p>
      </section>

      <section id="nested-shapes">
        <h3>Nesting Shapes</h3>
        <p>
          In the examples above, every shape is labeled with an IRI.
          In the ShEx model, every shape has a label.
          Using ShExC syntax, however, a shape can be written without a label, in which case the shape is labeled by the ShExC parser with a blank node that is unique with respect to all other blank nodes in the schema.  
          In the example below, the value of the triple constraint on predicate ex:reportedBy is a shape comprised of triples constraints on the predicates foaf:name and foaf:mbox.  
          In ShExC syntax, this anonymous shape is enclosed in curly brackets.  
          In effect, this anonymous variant on my:UserShape (see above) is "nested" within my:IssueShape.
          The ShExJ syntax has no corresponding shortcut: the triple constraint on ex:reportedBy references a unique blank node allocated by the parser, and that unique blank node is the label for a shape described further down in the schema.
        </p>
        <div class="namespace">
          <div id="nested-shapes-example-1" class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc"><span class="comment"># schema (ShExC)</span>
<span class="shape-name IssueShape lowlight2 top bot">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:unassigned ex:assigned</span>];
  <span class="predicate">ex:reportedBy</span> <span class="curlies lowlight2 top bot">{</span>
    <span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span>;
    <span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span><span class="keyword">+</span>
  <span class="curlies lowlight2 top bot">}</span>
}</pre>

          <!-- JSON example -->
            <pre class="schema json"><span class="comment">// schema (JSON)</span>
{ "type": "Schema",
  "shapes": {
    <span class="shape-name IssueShape lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "ex:state"</span>,                      
            <span class="value-constraint">"value": { "type": "NodeConstraint",              </span>
            <span class="value-constraint">  "values": [ <span class="value-constraint">"ex:unassigned", "ex:assigned"</span> ]</span>
            <span class="value-constraint">}                                             </span>
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "ex:reportedBy"</span>,                 
            <span class="value-constraint">"value": { "type": "ShapeRef",</span>              
            <span class="value-constraint">  "reference": <span class="bnode lowlight2 top bot">"_:b1"</span></span>                 
            <span class="value-constraint">}              </span>                               
          }                                               
        ]
      }
    },
    <span class="bnode lowlight2 top bot">"_:b1"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:name"</span>,                     
            <span class="value-constraint">"value": {             </span>                       
            <span class="value-constraint">  "type": "NodeConstraint",</span>                       
            <span class="value-constraint">  "datatype": "xsd:string"</span>                    
            <span class="value-constraint">}                      </span>                       
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:mbox"</span>,                     
            <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              
            <span class="value-constraint">  "nodeKind": "iri"             </span>              
            <span class="value-constraint">},                                            
            "min": 1, "max": "*"           </span>               
          }                                               
        ]
      }
    }
  }
}</pre>
          </div>
          <script type="text/javascript">
          <!--
    prepareHighlight(["bnode", "curlies", "IssueShape"], "highlight2", "lowlight2");
          -->
          </script>
        </div>
      </section>

    <section id="choices">
      <h2>Expressions with Choices</h2>
      <div class="namespace">
        <p>
          Most schema languages offer a way to express choices.
          In the following example, a user has <span class="eitherOr   lowlight2 top bot">either a simple name</span> (<span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span></span>), <span class="eitherOr   lowlight2 top bot">or a composite name</span> (<span class="fname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">familyName</span></span> with one or more <span class="gname lowlight1 top bot table"><span class="type">foaf:</span><span class="constant">givenName</span></span>s).
          The user must have exactly one <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span></span>.
        </p>

        <div class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:UserShape</span> {
  <span class="eitherOr   lowlight2 top">(                              </span>
     <span class="name       lowlight1 top bot"><span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span></span>
  <span class="eitherOr   lowlight2 bot">                               </span>
  <span class="eitherOr   lowlight2 top">  |                            </span>
      <span class="gname      lowlight1 top bot"><span class="predicate">foaf:givenName</span> <span class="value-constraint">xsd:string</span>+</span>;
      <span class="fname      lowlight1 top bot"><span class="predicate">foaf:familyName</span> <span class="value-constraint">xsd:string</span></span>
  <span class="eitherOr   lowlight2 bot">);                             </span>
  <span class="mbox       lowlight1 top bot"><span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span></span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;">
{ <span class="shape-name">"my:UserShape"</span>: { "type": "Shape",
    "expression": { "type": "group",
      "expressions": [
        { "type": "OneOf",
          "expressions": [
            <span class="eitherOr   lowlight2 top">                                                                  </span>
            <span class="name       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:name"</span>,        </span>
            <span class="name       lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span> }</span>,
            <span class="eitherOr   lowlight2 bot">                                                                  </span>
            <span class="eitherOr   lowlight2 top">                                                                  </span>
            { "type": "group",
              "expressions": [
                <span class="gname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:givenName"</span>,  </span>
                <span class="gname      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>,</span>
                <span class="gname      lowlight1 bot">  "min": 1, "max": "*" },                                     </span>
                <span class="fname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:familyName"</span>,  </span>
                <span class="fname      lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span> }</span>
              ]
            }
            <span class="eitherOr   lowlight2 bot">                                                                  </span>
          ]
        },
        <span class="mbox       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:mbox"</span>, </span>
        <span class="mbox       lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "IRI" }</span> }</span>
      ]
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle pass">
<span class="function-name">inst:User1</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Alice Walker"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:awalker@example.org&gt;</span><span class="keyword"></span></span> .

<span class="function-name">inst:User2</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="gname lowlight1 top"><span class="type">foaf:</span><span class="constant">givenName</span>  <span class="string top bot">"Robert"</span></span> ;
    <span class="gname lowlight1 bot"><span class="type">foaf:</span><span class="constant">givenName</span>  <span class="string top bot">"Paris"</span> </span>;
    <span class="fname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">familyName</span> <span class="string top bot">"Moses"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:rpmoses@example.org&gt;</span><span class="keyword"></span></span> .</pre>
          <pre class="instance turtle fail">
<span class="function-name">inst:User3</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="gname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">givenName</span>  <span class="string top bot">"Smith"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bobs@example.org&gt;</span><span class="keyword"></span></span> .

<span class="function-name">inst:User4</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"A"</span></span> ;
    <span class="gname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">givenName</span>  <span class="string top bot">"B"</span></span> ;
    <span class="fname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">familyName</span> <span class="string top bot">"C"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bobs@example.org&gt;</span><span class="keyword"></span></span> .

<span class="function-name">inst:User5</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"A"</span></span> ;
    <span class="gname lowlight1 top bot"><span class="type">foaf:</span><span class="constant">givenName</span>  <span class="string top bot">"B"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bobs@example.org&gt;</span><span class="keyword"></span></span> .
</pre>
          </div>

          <div style="clear:both;"></div>
          <table class="example results">
            <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
            <tr class="pass"><td>my:UserShape</td><td>inst:User1</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="pass"><td>my:UserShape</td><td>inst:User2</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="fail hilight-component top lowlight2"><td>my:UserShape</td><td>inst:User3</td><td>fail</td><td class="fail">Expected a <span class="type">foaf:</span><span class="constant">familyName</span> arc.</td></tr>
            <tr class="fail hilight-invComponent lowlight1 bot"><td>my:UserShape</td><td>inst:User4</td><td>fail</td><td class="fail">Expected only one disjunction to pass.</td></tr>
            <tr class="fail hilight-component top lowlight2"><td>my:UserShape</td><td>inst:User5</td><td>fail</td><td class="fail">Extra <span class="type">foaf:</span><span class="constant">givenName</span> arc.</td></tr>
          </tbody></table>
      </div>
      <script type="text/javascript">
      <!--
prepareHighlight(['oneOrMore', 'eitherOr'], "highlight2", "lowlight2");
prepareHighlight(['name', 'gname', 'fname', 'mbox'], "highlight1", "lowlight1");
      -->
      </script>
      </div>
    </section>

    
      <section id="value-sets">
        <h2>Value Sets</h2>
        <p>
        A <span class="new">value set</span> is a value constraint for enumerating the set of permissible values for a property.  The values can be IRIs or literals.
        </p>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:IssueShape</span> {
  <span class="type">ex:</span><span class="constant">state</span>Â <span class="value-constraint new lookit">[ex:unassigned ex:assigned]</span>
}</pre>
        <pre class="schema json table">
{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="value-constraint new lookit">[ "ex:unassigned", "ex:assigned" ]</span> } } } }</pre>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:IssueShape</span> {
  <span class="type">ex:</span><span class="constant">state</span>Â <span class="value-constraint new lookit">["unassigned" "assigned"]</span>
}</pre>
        <pre class="schema json table">
{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="value-constraint new lookit">[ "\"unassigned\'", "\"assigned\"" ]</span> } } } }</pre>
        <div style="clear:both;"> </div>
        <p>
          Fixed values are represented as value sets with one member.
          For example, a required type triple can be expressed in the following two ways using the ShExC syntax:
        </p>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:UserShape</span> {
  <span class="type">rdf:</span><span class="constant">type</span>Â <span class="value-constraint new lookit">[foaf:Person]</span>
}</pre>
        <pre class="schema json table">{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "rdf:type",
    "value": { "type": "NodeConstraint", "values": [ <span class="value-constraint new lookit">"foaf:Person"</span> ] } } } }</pre>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:UserShape</span> {
  <span class="keyword">a</span>Â <span class="value-constraint new lookit">[foaf:Person]</span>
}</pre>
        <div style="clear:both;"> </div>

        <div id="sec-iri-range">
          <div class="example wrapper">
            <p>
              A value set can also contain <span class="new">IRI ranges</span>.
              An IRI range can be defined as including all IRIs that start with a given base IRI by appending a tilde ("<code>~</code>").
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="function-name">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="function-name">&lt;http://aux.example/terms#&gt;</span>

<span class="shape-name">my:UserShape</span> {
  <span class="predicate">ex:status</span> <span class="value-constraint">[ excodes:~ auxterms:~ ]</span>
 ^<span class="predicate">ex:hasIssue</span> <span class="value-constraint">[ ex:Product1 ex:Product2 ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ <span class="Shape-status">"my:UserShape"</span>: { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", <span class="predicate">"predicate": "ex:status"</span>,
    <span class="value-constraint">"value": {
      "type": "NodeConstraint", "values": [ "excodes:unassigned", "excodes:assigned" ] }</span> } } }</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
              <pre class="instance turtle pass">
<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue1</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="string top bot">excodes:resolved</span></span> .
<span class="status lowlight1 top bot"><span class="function-name">my:Product2 <span class="type">ex:</span><span class="constant">hasIssue</span> <span class="function-name">inst:Issue1</span></span></span> .
</pre>
              <pre class="instance turtle fail">
<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue2</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="string top bot errorSite">ex:done</span></span></span>.
<span class="status lowlight1 top bot"><span class="function-name">my:Product1 <span class="type">ex:</span><span class="constant">hasIssue</span> <span class="function-name">inst:Issue2</span></span></span> .

<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue3</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="string top bot">auxterms:done</span></span></span>.
<span class="status lowlight1 top bot"><span class="function-name errorSite">my:Product3 <span class="type">ex:</span><span class="constant">hasIssue</span> <span class="function-name">inst:Issue3</span></span></span> .
</pre>
  </div>
            <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass user2 top lowlight1"><td>my:IssueShape</td><td>inst:Issue1</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail user5 bot lowlight1"><td>my:IssueShape</td><td>inst:Issue2</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="type">ex:</span><span class="constant">done</span></span> not in range of <span class="type">ex:</span><span class="constant">status</span>.</td></tr>
                <tr class="fail user5 bot lowlight1"><td>my:IssueShape</td><td>inst:Issue3</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="type">my:</span><span class="constant">Product3</span></span> not in range of <span class="type">ex:</span><span class="constant">hasIssue</span>.</td></tr>
              </tbody></table>
          </div>
        </div>

        <div id="sec-iri-range-exclusion" class="namespace">
          <div class="example wrapper">
            <p>
            An IRI range matches multiple IRIs, from which one may wish to exclude specific IRIs or IRI ranges.
            <span class="new">IRI range exclusions</span> are expressed by following an IRI range with: minus sign (<code>-</code>), whitespace, and a specific IRI, or IRI range, to be excluded from the IRI range.  An arbitrary number of IRIs, each prefixed with a minus sign and whitespace, can follow the first.
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="function-name">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="function-name">&lt;http://aux.example/terms#&gt;</span>

<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:status</span> <span class="value-constraint">[
      excodes:~ - excodes:unassigned - <span class="assigned top bot lowlight2">excodes:assigned</span>
      auxterms:~ - <span class="med_ top bot lowlight2">&lt;http://aux.example/terms#med_&gt;~</span>
  ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ <span class="Shape-status">"my:IssueShape"</span>: { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", <span class="predicate">"predicate": "ex:status"</span>,
    <span class="value-constraint">"value": {
      "type": "NodeConstraint", "values": [ "excodes:unassigned", "excodes:assigned" ] }</span> } } }</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
              <pre class="instance turtle">
<span class="user2 lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue2</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="string top bot">excodes:resolved</span></span> .
<span>                                         </span>
<span class="fail user3 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue3</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="assigned top bot errorSite">excodes:assigned</span></span></span>.
<span>                                         </span>
<span class="fail user4 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue4</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="med_ top bot errorSite">auxterms:med_sniffles</span></span></span>.
<span>                                         </span>
<span class="fail user5 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Issue5</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="done top bot errorSite">ex:done</span></span></span>.</pre>
  </div>
            <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass user2 top lowlight1"><td>my:IssueShape</td><td>inst:Issue2</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail user3     lowlight1"><td>my:IssueShape</td><td>inst:Issue3</td><td>fail</td><td class="fail"><span class="assigned top bot lowlight2"><span class="type">excodes:</span><span class="constant">assigned</span></span> prohibited.</td></tr>
                <tr class="fail user4     lowlight1"><td>my:IssueShape</td><td>inst:Issue4</td><td>fail</td><td class="fail"><span class="med_ top bot lowlight2"><span class="type">auxterms:</span><span class="constant">med_â€¦</span></span> arcs.</td></tr>
                <tr class="fail user5 bot lowlight1"><td>my:IssueShape</td><td>inst:Issue5</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="type">ex:</span><span class="constant">done</span></span> not in range of <span class="type">ex:</span><span class="constant">status</span>.</td></tr>
              </tbody></table>
            <script type="text/javascript">
            <!--
prepareHighlight(["user2", "user3", "user4", "user5"], "highlight1", "lowlight1");
prepareHighlight(["assigned", "med_", "done"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
          <div class="example wrapper">
            <p>
              A period (<code>.</code>) can be used with IRI exclusions to say that any IRI is permitted except the excluded IRIs.
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span>

<span class="shape-name">my:UserShape</span> {
  <span class="predicate">ex:status</span> <span class="value-constraint">[
      . - excodes:unassigned - excodes:assigned
  ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ <span class="Shape-status">"my:UserShape"</span>: { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", <span class="predicate">"predicate": "ex:status"</span>,
    <span class="value-constraint">"value": {
      "type": "NodeConstraint", "values": [ "excodes:unassigned", "excodes:assigned" ] }</span> } } }</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
              <pre class="instance turtle pass"><span class="comment"># passing data</span>
<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Shape2</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="string top bot">ex:random</span></span> .</pre>
              <pre class="instance turtle fail"><span class="comment"># failing data - excodes:assigned prohibited</span>
<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="function-name">inst:Shape3</span></span> <span class="type">ex:</span><span class="constant">status</span>  <span class="min lowlight2 top bot"><span class="string top bot errorSite">excodes:assigned</span></span></span>.</pre>
  </div>
            <div style="clear:both;"></div>
          </div>
        </div>
      </section>

      @@@Validation result here

  </section>

      <section id="advanced">
      <h2>Advanced Concepts</h2>
      <section id="inverse-properties">
        <h3>Inverse Triple Constraints</h3>
        <div class="namespace">
          <p>
            Placing a regular triple constraint on predicate ex:reportedIssue into <span class="shape-name">my:UserShape</span> effectively requires all users to have reported an issue.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:unassigned ex:assigned</span>]
}

<span class="shape-name">my:UserShape</span> {
  <span class="predicate">foaf:name</span> <span class="constraint">xsd:string</span>;
  <span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span>+;
  <span class="reportedIssue lowlight1 top bot"><span class="predicate">ex:reportedIssue</span> <span class="value-constraint">@</span><span class="shape-name">my:UserShape</span></span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "ex:state"</span>,                      
            <span class="value-constraint">"value": { "type": "NodeConstraint",              </span>
            <span class="value-constraint">  "values": [ "ex:unassigned", "ex:assigned" ]</span>
            <span class="value-constraint">}                                             </span>
          }
        ]
      }
    },
    <span class="shape-name">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:name"</span>,                     
            <span class="value-constraint">"value": {                </span>
            <span class="value-constraint">  "type": "NodeConstraint",   </span>
            <span class="value-constraint">  "datatype": "xsd:string"</span>
            <span class="value-constraint">}                         </span>
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:mbox"</span>,                     
            <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              
            <span class="value-constraint">  "nodeKind": "iri"             </span>              
            <span class="value-constraint">},                              </span>
            "min": 1, "max": "*"
          },                                              
          <span class="reportedIssue lowlight1 top">{ "type": "TripleConstraint",                      </span>
          <span class="reportedIssue lowlight1    ">  <span class="predicate">"predicate": "ex:reportedIssue"</span>, <span class="inversePredicate top bot keyword lowlight2">"inverse": false</span>,</span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">"value": { "type": "ShapeRef",</span>                 </span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">  "reference": <span class="shape-name">"my:IssueShape"</span></span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">}              </span>                                  </span>
          <span class="reportedIssue lowlight1 bot">}                                                  </span>
        ]
      }
    }
  }
}</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
            <pre class="instance turtle">
<span class="function-name">inst:Issue4</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="type">ex:</span><span class="constant">unassigned</span></span> .

<span class="fail inst-User6 lowlight2 top"><span class="function-name">inst:User6</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ; <span class="comment"># fails my:UserShape</span></span>
<span class="fail inst-User6 lowlight2    ">    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span></span> ;              </span>
<span class="fail inst-User6 lowlight2    ">    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ; </span>
<span class="fail inst-User6 lowlight2 bot">    <span class="mbox lowlight1 bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span>.  </span>

<span class="function-name">inst:User7</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="reportedIssue lowlight1 top bot new">ex:reportedIssue <span class="function-name">inst:Issue4</span></span> ;
    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ;
    <span class="mbox lowlight1 bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span>.</pre>
  </div>
            <div style="clear:both;"></div>
          </div>
          <script type="text/javascript">
          <!--
prepareHighlight(["inst-User6"], "highlight2", "lowlight2");
prepareHighlight(["state999", "reportedBy", "reportedIssue", "name999", "mbox999"], "highlight1", "lowlight1");
              -->
            </script>
          </div>

          <p>
            @@@Validation result here
          </p>

        <div class="namespace">
          <p>
            However, it may be more precise to require that for every issue, there is some user who reported it.
            This could be expressed in the data by describing every issue as being reported by (<span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>) a user.
            Alternatively, an issue could be described as the object of a triple with predicate ex:reportedIssue.
            A triple constraint for such an incoming arc may expressed in the ShExC syntax by prefixing the constraint with a caret (<span class="inversePredicate top bot keyword lowlight2">^</span>) and in the ShExJ syntax with <span class="inversePredicate top bot keyword lowlight2">"inverse": true</span>.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:unassigned ex:assigned</span>];
 <span class="inversePredicate top bot keyword lowlight2">^</span><span class="reportedIssue lowlight1 top bot"><span class="predicate">ex:reportedIssue</span> <span class="value-constraint">@</span><span class="shape-name">my:UserShape</span></span>
}

<span class="shape-name">my:UserShape</span> {
  <span class="predicate">foaf:name</span> <span class="constraint">xsd:string</span>;
  <span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span>+
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "ex:state"</span>,                      
            <span class="value-constraint">"value": { "type": "NodeConstraint",              </span>
            <span class="value-constraint">  "values": [ "ex:unassigned", "ex:assigned" ]</span>
            <span class="value-constraint">}                                             </span>
          },                                              
          <span class="reportedIssue lowlight1 top">{ "type": "TripleConstraint",                      </span>
          <span class="reportedIssue lowlight1    ">  <span class="predicate">"predicate": "ex:reportedIssue"</span>, <span class="inversePredicate top bot keyword lowlight2">"inverse": true</span>,</span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">"value": { "type": "ShapeRef",</span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">  "reference": <span class="shape-name">"my:IssueShape"</span></span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="value-constraint">}              </span>                                  </span>
          <span class="reportedIssue lowlight1 bot">}                                                  </span>
        ]
      }
    },
    <span class="shape-name">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:name"</span>,                     
            <span class="value-constraint">"value": {                </span>
            <span class="value-constraint">  "type": "NodeConstraint",   </span>
            <span class="value-constraint">  "datatype": "xsd:string"</span>
            <span class="value-constraint">}                         </span>
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate">"predicate": "foaf:mbox"</span>,                     
            <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              
            <span class="value-constraint">  "nodeKind": "iri"             </span>              
            <span class="value-constraint">},                              </span>
            <span class="value-constraint">"min": 1, "max": "*"            </span>
          }                                               
        ]
      }
    }
  }
}</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
            <pre class="instance turtle pass">
<span class="function-name">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="type">ex:</span><span class="constant">unassigned</span></span> .
<span class="function-name">inst:user1</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="reportedIssue lowlight1 top bot new">ex:reportedIssue <span class="function-name">inst:Issue1</span></span> ;
    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ;
    <span class="mbox lowlight1 bot"><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span>.</pre>
            <pre class="instance turtle fail">
<span class="function-name">inst:Issue2</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>         <span class="type">ex:</span><span class="constant">unassigned</span></span> ;
    <span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>    <span class="function-name">inst:User2</span></span> .
<span class="function-name">inst:user2</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>        <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>        <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ;
    <span class="mbox lowlight1 bot"><span class="type">foaf:</span><span class="constant">mbox</span>        <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span>.

<span class="function-name">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>         <span class="type">ex:</span><span class="constant">unassigned</span></span> ;
    <span class="reportedIssueInv lowlight1 top bot errorSite">ex:reportedIssue <span class="function-name">inst:User3</span></span> .
<span class="function-name">inst:user3</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>        <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>        <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ;
    <span class="mbox lowlight1 bot"><span class="type">foaf:</span><span class="constant">mbox</span>        <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span>.

<span class="function-name">inst:Issue4</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>         <span class="type">ex:</span><span class="constant">unassigned</span></span> ;
    <span class="reportedIssueInv lowlight1 top bot errorSite">ex:reportedIssue <span class="function-name">inst:User4</span></span> .
<span class="function-name">inst:user4</span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ;
    <span class="name lowlight1 top bot errorSite">foaf:name        <span class="string top bot">"Robert"</span></span> ;
    <span class="name lowlight1 top bot errorSite">foaf:name        <span class="string top bot">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="type">foaf:</span><span class="constant">mbox</span>        <span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span> ;
</pre>
  </div>
            <div style="clear:both;"></div>
            <table class="example results">
              <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>my:IssueShape</td><td>inst:Issue1</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail"><td>my:IssueShape</td><td>inst:Issue2</td><td>fail</td><td class="fail">Missing incoming <span class="type">ex:</span><span class="constant">reportedIssue</span> property.</td></tr>
              <tr class="fail"><td>my:IssueShape</td><td>inst:Issue3</td><td>fail</td><td class="fail"><span class="type">ex:</span><span class="constant">reportedIssue</span> is in the wrong direction.</td></tr>
              <tr class="fail"><td>my:IssueShape</td><td>inst:Issue4</td><td>fail</td><td class="fail">Subject of <span class="type">ex:</span><span class="constant">reportedIssue</span> does not match <span class="shape-name">my:UserShape</span>;</td></tr>
              <tr class="fail"><td>my:UserShape</td><td>inst:User4</td><td>fail</td><td class="fail">Max cardinality of <span class="type">foaf:</span><span class="constant">name</span> exceeded.</td></tr>
            </tbody></table>
          </div>
          <script type="text/javascript">
          <!--
prepareHighlight(["inversePredicate"], "highlight2", "lowlight2");
prepareHighlight(["state999", "reportedBy", "reportedIssue", "reportedIssueInv", "name999", "mbox999"], "highlight1", "lowlight1");
              -->
            </script>
          </div>


        </section>

        <section id="negated-properties">
          <h3>Negative Triple Constraints</h3>
          <div class="namespace">
            <p>
              A schema may specify triples that <em>must not</em> appear in the data.
              For example, suppose there were a need for free-standing issues -- issues having no ex:component relationships, incoming or outgoing, with any other issues.
              This can be expressed by setting the cardinality of triple constraints on the predicate ex:component to zero, meaning that they should match zero triples in the data.
              That the shape must also not be the target of incoming triples with the predicate ex:component is expressed by prefixing the triple constraint with a caret (<code>^</code>).
            </p>
  
            <div class="example wrapper">
              <!-- ShExC example -->
              <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:SolitaryIssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:unassigned ex:assigned</span>];
 <span class="hilight-component top bot keyword lowlight2"> <span class="predicate">ex:component</span> . <span class="new" style="color: black; ">{0}</span></span> ;
 <span class="hilight-invComponent top bot keyword lowlight2">^<span class="predicate">ex:component</span> . <span class="new" style="color: black; ">{0}</span></span>
}</pre>

              <!-- JSON example -->
              <pre class="schema json" style="float:left;">
TODO</pre>
              <div class="verticalDivider"><!-- acts as a divider --></div>
              <div style="float:left;">
              <pre class="instance turtle">
<span class="function-name">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="other lowlight1 top bot"><span class="type">rdfs:</span><span class="constant">label</span>      <span class="string">"smokes too much"</span></span> ;
    <span class="type">ex:</span><span class="constant">state</span>        <span class="type">ex:</span><span class="constant">unassigned</span> .

<span class="fail hilight-component lowlight1 top"><span class="function-name">inst:Issue2</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;                 </span>
<span class="fail hilight-component lowlight1    ">    <span class="other lowlight1 top bot"><span class="type">dc:</span><span class="constant">creator</span>      <span class="string">"Alice"</span></span> ;            </span>
<span class="fail hilight-component lowlight1    ">    <span class="type">ex:</span><span class="constant">state</span>        <span class="type">ex:</span><span class="constant">unassigned</span> ;      </span>
<span class="fail hilight-component lowlight1 bot">    <span class="errorSite">ex:component</span>    <span class="function-name">inst:Issue3</span> .        </span>
<span>                                         </span>
<span class="fail hilight-invComponent lowlight1 top"><span class="function-name">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;                 </span>
<span class="fail hilight-invComponent lowlight1    ">    <span class="other lowlight1 top bot"><span class="type">rdfs:</span><span class="constant">label</span>      <span class="string">"smokes too much"</span></span> ;  </span>
<span class="fail hilight-invComponent lowlight1 bot">    <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="type">ex:</span><span class="constant">unassigned</span></span> .      </span></pre>
              </div>
              <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass"><td>my:SolitaryIssueShape</td><td>inst:Issue1</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail hilight-component top lowlight2"><td>my:SolitaryIssueShape</td><td>inst:Issue2</td><td>fail</td><td class="fail">Expected zero outgoing <span class="type">ex:</span><span class="constant">component</span> arcs.</td></tr>
                <tr class="fail hilight-invComponent lowlight1 bot"><td>my:SolitaryIssueShape</td><td>inst:Issue3</td><td>fail</td><td class="fail">Expected zero incoming <span class="type">ex:</span><span class="constant">component</span> arcs.</td></tr>
              </tbody></table>
            </div>
            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-component", "hilight-invComponent"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </section>

          <section id="closed-shapes">
            <h4>Closing Shapes</h4>
        <div class="namespace">
          <p>
            Services backed by an RDF triple store may simply accept and store any triples not described in the schema;
            in such a case, the schema may only identify triples that the service understands and manipulates.
            At the other extreme are services or databases that accept or emit <em>only</em> the data structures described in a schema.
            In a ShEx schema, a shape may be defined to match <em>only</em> RDF data nodes that have outgoing triples matching the given set of triple constraints and <em>no other</em> outgoing triples.
            A shape declaration can be qualified to mean "this set of outgoing triples and no others" by using the keyword <span class="keyword closed lowlight2 top bot">CLOSED</span>.
          </p>

        <div id="closed-shapes-example-2" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:OpenUserShape</span> {
  <span class=""><span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span></span>;
  <span class=""><span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span></span>
}

<span class="shape-name">my:ClosedUserShape</span> <span class="keyword closed lowlight2 top bot">CLOSED</span> {
  <span class=""><span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span></span>;
  <span class=""><span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span></span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ "type": "Schema",
  "shapes": [
    { "type": "Shape", "id": <span class="user lowlight2 top bot">"my:OpenUserShape"</span>
      "expression": { "type": "group",
        "expressions": [
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate">"predicate": "foaf:name"</span>,                     </span>
          <span class="">  <span class="value-constraint">"value": {             </span>                       </span>
          <span class="">  <span class="value-constraint">  "type": "NodeConstraint",</span>                   </span>
          <span class="">  <span class="value-constraint">  "datatype": "xsd:string"</span>                    </span>
          <span class="">  <span class="value-constraint">}                      </span>                       </span>
          <span class="">},                                              </span>
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate">"predicate": "foaf:mbox"</span>,                     </span>
          <span class="">  <span class="value-constraint">"value": { "type": "NodeConstraint",</span>          </span>
          <span class="">  <span class="value-constraint">  "nodeKind": "iri"             </span>              </span>
          <span class="">  <span class="value-constraint">}                                             </span></span>
          <span class="">}                                               </span>
        ]
      }
    },
    { "type": "Shape", "id": <span class="user lowlight2 top bot">"my:ClosedUserShape"</span>,
      <span class="closed lowlight2 top bot">"closed": "true"</span>,
      "expression": { "type": "group",
        "expressions": [
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate">"predicate": "foaf:name"</span>,                     </span>
          <span class="">  <span class="value-constraint">"value": {             </span>                       </span>
          <span class="">  <span class="value-constraint">  "type": "NodeConstraint",</span>                   </span>
          <span class="">  <span class="value-constraint">  "datatype": "xsd:string"</span>                    </span>
          <span class="">  <span class="value-constraint">}                      </span>                       </span>
          <span class="">},                                              </span>
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate">"predicate": "foaf:mbox"</span>,                     </span>
          <span class="">  <span class="value-constraint">"value": { "type": "NodeConstraint",</span>          </span>
          <span class="">  <span class="value-constraint">  "nodeKind": "iri"             </span>              </span>
          <span class="">  <span class="value-constraint">}                                             </span></span>
          <span class="">}                                               </span>
        ]
      }
    }
  ]
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle" style="float:left;">
<span class="user lowlight2 top bot"><span class="function-name">inst:User1</span></span>
    <span class=""><span class="type">foaf:</span><span class="constant">name</span>       <span class="string">"Bob Smith"</span></span> ;
    <span class=""><span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:rs@example.org&gt;</span> </span>.

<span class="rdftype lowlight1 top bot"><span class="function-name">inst:User2</span> <span class="errorSite">a foaf:Person</span></span> ;
    <span class="type">foaf:</span><span class="constant">name</span>       <span class="string">"Bob Smith"</span> ;
    <span class="type">foaf:</span><span class="constant">mbox</span>       <span class="fullURL">&lt;mailto:bob@example.org&gt;</span> .

<span class="foafknows lowlight2 top bot errorSite">inst:User2 foaf:knows</span> inst:User1 ;
</pre>
  </div>
          <div style="clear:both;"></div>
      </div>
      <div style="clear:both;"> </div>
      <table class="example results">
        <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
        <tr class="pass"><td>my:OpenUserShape</td><td>inst:User1</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="pass"><td>my:OpenUserShape</td><td>inst:User2</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="pass"><td>my:ClosedUserShape</td><td>inst:User1</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="fail hilight-component top lowlight2"><td>my:ClosedUserShape</td><td>inst:User2</td><td>fail</td><td class="fail">Unexpected <span class="rdftype lowlight1 top bot"><span class="type">rdf:</span><span class="constant">type</span></span> and <span class="foafknows lowlight1 top bot"><span class="type">foaf:</span><span class="constant">knows</span></span> arcs.</td></tr>
      </tbody></table>
      <p>
        The <span class="type">foaf:</span><span class="constant">knows</span> arc invalidates <span class="function-name">inst:User2</span> but not <span class="function-name">inst:User2</span> because <span class="keyword closed lowlight2 top bot">CLOSED</span> applies only to outgoing arcs.
      </p>
      <script type="text/javascript">
      <!--
prepareHighlight(["closed", "rdftype", "foafknows"], "highlight2", "lowlight2");
      -->
      </script>
      </div>
          </section>

          <section id="extra-properties">
            <h4>Permitting Extra Properties</h4>
            <p>
              If a shape contains a triple constraint with predicate P, the shape is said to "mention" P.  By default, for an RDF data node to match that shape, every outgoing arc from that node that uses a mentioned predicate must match a triple constraint in the shape.  This is called "closing a property".  The following example says that all data triples that are mapped to my:UserShape and that use the property rdf:type (in ShExC syntax: <span class="keyword">a</span>) must have either foaf:Person or ex:Employee as object.  The example data fails validation because ex:Manager is not a permitted object.
            </p>
        <div id="extra-properties-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span> {
  <span class="state      lowlight1 top bot"><span class="predicate">a</span> [<span class="stateValue lowlight2 top bot value-constraint">ex:Employee</span>]</span>;
  <span class="reportedBy lowlight1 top bot"><span class="predicate">a</span> [<span class="stateValue lowlight2 top bot value-constraint">foaf:Person</span>]</span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ "type": "Schema",
  "shapes": {
    <span class="shape-name hilight-shapeName lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="state      lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="state      lowlight1    ">  <span class="predicate">"predicate": "rdf:type"</span>,                      </span>
          <span class="state      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",              </span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"ex:Employee"</span> ]</span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">}                                             </span></span>
          <span class="state      lowlight1 bot">},                                              </span>
          <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="reportedBy lowlight1    ">  <span class="predicate">"predicate": "ex:reportedBy"</span>,                 </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"foaf:Person"</span> ]</span></span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">}              </span>                               </span>
          <span class="reportedBy lowlight1 bot">}                                               </span>
        ]
      }
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle fail" style="float:left;">
<span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span>, <span class="type">ex:</span><span class="constant">Employee</span>, <span class="errorSite">ex:Manager</span>.</pre>
          </div>
          <div style="clear:both;"></div>
      </div>
            <p style="margin-bottom: 0;">
            The shape my:UserShape can be modified to accept any number of additional arcs with the predicate rdf:type by using the keyword <span class="keyword closed lowlight2 top bot">EXTRA</span> followed by the permitted predicate (here: <span class="keyword">a</span>).
            </p>
        <div id="extra-properties-example-2" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span> EXTRA <span class="keyword">a</span> {
  <span class="state      lowlight1 top bot"><span class="predicate">a</span> [<span class="stateValue lowlight2 top bot value-constraint">ex:Employee</span>]</span>;
  <span class="reportedBy lowlight1 top bot"><span class="predicate">a</span> [<span class="stateValue lowlight2 top bot value-constraint">foaf:Person</span>]</span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{ "type": "Schema",
  "shapes": {
    <span class="shape-name hilight-shapeName lowlight2 top bot">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="state      lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="state      lowlight1    ">  <span class="predicate">"predicate": "rdf:type"</span>,                      </span>
          <span class="state      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",              </span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"ex:Employee"</span> ]</span></span>
          <span class="state      lowlight1    ">  <span class="value-constraint">}                                             </span></span>
          <span class="state      lowlight1 bot">},                                              </span>
          <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="reportedBy lowlight1    ">  <span class="predicate">"predicate": "ex:reportedBy"</span>,                 </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",</span>              </span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"foaf:Person"</span> ]</span></span>
          <span class="reportedBy lowlight1    ">  <span class="value-constraint">}              </span>                               </span>
          <span class="reportedBy lowlight1 bot">}                                               </span>
        ]
      }
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle pass" style="float:left;">
<span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span>, <span class="type">ex:</span><span class="constant">Employee</span>, <span class="type">ex:</span><span class="constant">Manager</span>.</pre>
          </div>
      </div>
          </section>

      <section id="labeled-constraints">
        <h3>Reusing Triple Expressions</h3>
        <div class="namespace">
          <p>
            When multiple shapes share triple constraints in common, the triple constraints can be defined and labeled just once and referenced multiple times.
            In the example below, both users and employees are expected to have a <span class="type">foaf:</span><span class="constant">name</span> and <span class="type">foaf:</span><span class="constant">mbox</span>.
            <span class="shape-name">my:UserShape</span> declares <span class="shape-name entity lowlight1 top bot">my:entity</span> and <span class="shape-name">my:EmployeeShape</span> includes it.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre id="schema-TE-reuse" class="schema shexc" style="float:left;">
<span class="prefixes" style="display: none;"><span class="keyword">PREFIX</span> ex: <span class="function-name">&lt;<a href="http://ex.example/#">http://ex.example/#</a>&gt;</span><span class="comment">
</span><span class="keyword">PREFIX</span> my: <span class="function-name">&lt;<a href="http://my.example/#">http://my.example/#</a>&gt;</span><span class="comment">
</span><span class="keyword">PREFIX</span> foaf: <span class="function-name">&lt;<a href="http://xmlns.com/foaf/0.1/">http://xmlns.com/foaf/0.1/</a>&gt;</span>

</span><span class="shape-name">my:UserShape</span> {
  $<span class="shape-name entity lowlight1 top bot">my:entity</span> (
    <span class="type">foaf:</span><span class="constant">name</span> <span class="keyword">LITERAL</span> ;
    <span class="type">foaf:</span><span class="constant">mbox</span> <span class="keyword">IRI</span> <span class="keyword">+</span>
  ) ;
  <span class="type">ex:</span><span class="constant">userID</span> <span class="keyword">LITERAL</span>
}

<span class="shape-name">my:EmployeeShape</span> {
  &amp;<span class="shape-name entity lowlight1 top bot">my:entity</span> ;
  <span class="type">ex:</span><span class="constant">employeeID</span> <span class="keyword">LITERAL</span>
}
</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">{ "@context": "https://shexspec.github.io/context.jsonld",
  "type": "Schema", "shapes": [
    { "id": "http://my.example/#UserShape",
      "type": "Shape", "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "EachOf", "expressions": [
              { "type": "TripleConstraint",
                "predicate": "http://xmlns.com/foaf/0.1/name",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "literal" } },
              { "type": "TripleConstraint", "min": 1, "max": "unbounded",
                "predicate": "http://xmlns.com/foaf/0.1/mbox",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "iri" } }
            ],
            "id": <span class="shape-name entity lowlight1 top bot">"http://my.example/#entity"</span>
          },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#userID",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "literal" } }
        ] }
    },
    { "id": "http://my.example/#EmployeeShape",
      "type": "Shape", "expression": {
        "type": "EachOf",
        "expressions": [
          <span class="shape-name entity lowlight1 top bot">"http://my.example/#entity"</span>,
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#employeeID",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "literal" } }
        ] } }
  ] }</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
              <pre class="instance turtle tryable">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> ex: <span class="function-name">&lt;<a href="http://ex.example/#">http://ex.example/#</a>&gt;</span><span class="comment">
</span><span class="keyword">PREFIX</span> inst: <span class="function-name">&lt;<a href="http://example.com/users/">http://example.com/users/</a>&gt;</span>
<span class="keyword">PREFIX</span> foaf: <span class="function-name">&lt;<a href="http://xmlns.com/foaf/0.1/">http://xmlns.com/foaf/0.1/</a>&gt;</span>

</span><span class="type">inst:</span><span class="constant">Employee2</span> <span class="type">foaf:</span><span class="constant">name</span> <span class="string">"Bob"</span> ;
  <span class="type">foaf:</span><span class="constant">mbox</span> <span class="function-name">&lt;<a href="mailto:bob&#64;example.com">mailto:bob&#64;example.com</a>&gt;</span> ;
  <span class="type">ex:</span><span class="constant">employeeID</span> <span class="string">"e02"</span> <span class="keyword">.</span>

<span class="fail bot"><span class="type">inst:</span><span class="constant">Employee3</span> <span class="type">ex:</span><span class="constant">employeeID</span> <span class="string">"e03"</span> <span class="keyword">.</span>    </span><a class="tryit" href="#schema-TE-reuse" data-shape-map="inst:Employee2@my:EmployeeShape,inst:Employee3@my:EmployeeShape">try it</a>

<span class="type">inst:</span><span class="constant">User1</span> <span class="type">foaf:</span><span class="constant">name</span> <span class="string">"Alice"</span> ;
  <span class="type">foaf:</span><span class="constant">mbox</span> <span class="function-name">&lt;<a href="mailto:alice&#64;example.com">mailto:alice&#64;example.com</a>&gt;</span> ;
  <span class="type">ex:</span><span class="constant">userID</span> <span class="string">"u01"</span> <span class="keyword">.</span></pre>
            </div>
            <div style="clear:both;"> </div>
            <table class="example results">
              <tbody><tr><th class="schema">Shape</th><th class="data">Node</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>my:EmployeeShape</td><td>inst:Employee2</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail hilight-component top lowlight2"><td>my:EmployeeShape</td><td>inst:Employee3</td><td>fail</td><td class="fail">Expected <span class="type">foaf:</span><span class="constant">name</span> and <span class="type">foaf:</span><span class="constant">mbox</span> arcs.</td></tr>
              <tr class="pass"><td>my:UserShape</td><td>inst:User1</td><td>pass</td><td class="noreason"></td></tr>
            </tbody></table>
          </div>

          <script type="text/javascript">
            <!--
prepareHighlight(["entity"], "highlight2", "lowlight2");
            -->
          </script>
        </div>
      </section>

        <section id="additive-properties">
          <h3>Repeated Properties</h3>
          <div class="namespace">
            <p>
              The use of generic predicates sometimes leads to their being used multiple times in the same shape.
              In the following example, we want to make sure that an issue that is <span class="type">ex:</span><span class="constant">accepted</span> or <span class="type">ex:</span><span class="constant">resolved</span> has been reproduced both by a <span class="hilight-tester lowlight2 top bot">tester</span> and by a <span class="hilight-programmer lowlight2 top bot">programmer</span>.
            </p>

            <div class="example wrapper">
              <!-- ShExC example -->
              <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span>
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:accepted ex:resolved</span>];
  <span class="predicate">ex:reproducedBy</span> <span class="hilight-tester lowlight2 top bot new"><span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span></span>;
  <span class="predicate">ex:reproducedBy</span> <span class="hilight-programmer lowlight2 top bot new"><span class="value-constraint">@<span class="shape-name">my:ProgrammerShape</span></span></span>
}

<span class="hilight-tester lowlight2 top"><span class="shape-name">my:TesterShape</span> {          </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span>;   </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate">ex:role</span> [<span class="value-constraint">ex:testingRole</span>]</span>
<span class="hilight-tester lowlight2 bot">}                         </span>

<span class="hilight-programmer lowlight2 top"><span class="shape-name">my:ProgrammerShape</span> {                      </span>
<span class="hilight-programmer lowlight2    ">  <span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span>;                   </span>
<span class="hilight-programmer lowlight2    ">  <span class="predicate">ex:department</span> [<span class="value-constraint">ex:ProgrammingDepartment</span>]</span>
<span class="hilight-programmer lowlight2 bot">}                                         </span>
</pre>

              <!-- JSON example -->
              <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span>
{
  "my:IssueShape": { "type": "Shape",
    "expression": { "type": "group",
      "expressions": [
        { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:state"</span>,
          <span class="value-constraint">"value": { "type": "NodeConstraint", "values": [ "ex:accepted", "ex:resolved" ]</span> }
        },
        { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:reproducedBy"</span>,
          <span class="value-constraint">"value": { "type": "ShapeRef", <span class="hilight-tester lowlight2 top bot">"reference": "my:TesterShape"</span></span> }
        },
        { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:reproducedBy"</span>,
          <span class="value-constraint">"value": { "type": "ShapeRef", <span class="hilight-programmer lowlight2 top bot">"reference": "my:ProgrammerShape"</span></span> }
        }
      ]
    }
  },
  <span class="hilight-tester lowlight2 top">"my:TesterShape": { "type": "Shape",                                     </span>
  <span class="hilight-tester lowlight2    ">  "expression": { "type": "group",                                       </span>
  <span class="hilight-tester lowlight2    ">    "expressions": [                                                     </span>
  <span class="hilight-tester lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:name"</span>,            </span>
  <span class="hilight-tester lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>      </span>
  <span class="hilight-tester lowlight2    ">      },                                                                 </span>
  <span class="hilight-tester lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:role"</span>,              </span>
  <span class="hilight-tester lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "values": [ "ex:testingRole" ] }</span></span>
  <span class="hilight-tester lowlight2    ">      }                                                                  </span>
  <span class="hilight-tester lowlight2    ">    ]                                                                    </span>
  <span class="hilight-tester lowlight2    ">  }                                                                      </span>
  <span class="hilight-tester lowlight2 bot">},                                                                       </span>
  <span class="hilight-programmer lowlight2 top">"my:ProgrammerShape": { "type": "Shape",                                 </span>
  <span class="hilight-programmer lowlight2    ">  "expression": { "type": "group",                                       </span>
  <span class="hilight-programmer lowlight2    ">    "expressions": [                                                     </span>
  <span class="hilight-programmer lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:name"</span>,            </span>
  <span class="hilight-programmer lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>      </span>
  <span class="hilight-programmer lowlight2    ">      },                                                                 </span>
  <span class="hilight-programmer lowlight2    ">      { "type": "TripleConstraint", <span class="predicate">"predicate": "ex:department"</span>,        </span>
  <span class="hilight-programmer lowlight2    ">        <span class="value-constraint">"value": { "type": "NodeConstraint", "values": [ "ex:Programming" ] }</span></span>
  <span class="hilight-programmer lowlight2    ">      }                                                                  </span>
  <span class="hilight-programmer lowlight2    ">    ]                                                                    </span>
  <span class="hilight-programmer lowlight2    ">  }                                                                      </span>
  <span class="hilight-programmer lowlight2 bot">}                                                                        </span>
}</pre>
              <div class="verticalDivider"><!-- acts as a divider --></div>
              <div style="float:left;">
              <pre class="instance turtle pass"><span class="comment"># passing data</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-tester lowlight2 top bot"><span class="type">inst:</span><span class="constant">Tester2</span></span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-programmer lowlight2 top bot"><span class="type">inst:</span><span class="constant">Programmer3</span></span> .

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester2</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> .</span>

<span class="hilight-programmer lowlight2 top"><span class="type">inst:</span><span class="constant">Programmer3</span>                          </span>
<span class="hilight-programmer lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-programmer lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
              <div></div>
              <pre class="instance turtle fail"><span class="comment"># failing data</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester2</span></span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-tester lowlight2 bot"><span class="type">inst:</span><span class="constant">Tester4</span></span> .

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester2</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> .</span>

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester4</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> .</span></pre>
              </div>

            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-tester", "hilight-programmer"], "highlight2", "lowlight2");
            -->
            </script>
          </div>

            <p>
            Note that ShEx uses a partitioning strategy to find a solution whereby triples in the data are assigned to triple constraints in the schema.
              It is possible to construct schemas for which it is quite expensive to find a mapping from RDF data triple to ShEx triple constraint that satisfies the schema.
              In practical schemas, this is rarely a concern as the search space is quite small, however, certain mistakes in a schema can create a large search space.
            </p>
            <ul>
              <li>
                Accidentally duplicating many triple constraints in a shape causes the search space to explode.
                If you notice a validation process taking a long time or a lot of memory, look for duplicated chunks of the schema.
              </li>
              <li>
                For shapes with multiple triple constraints for the same predicate, try to minimize the overlap between the value expressions.
                For instance, if three types of inspection are necessary on a manufacturing checklist, use three different constraints for each of the inspection proprerties rather than requiring three different inspection properties with a value expression which is a union of all three types.
                This will make the validation process more efficient and will more effectively capture the business logic in the schema.
              </li>
            </ul>
          </section>
          <p>
          </p>
          <div class="namespace" style="display:none;">

              <div class="issue" style="clear:both;">
              <p>
                There are two proposed strategies for validation:
              </p>
              <ul>
                <li>
                  <code>partition</code> - no triple can be used to satisfy more than one constraint.
                </li>
                <li>
                  <code>conjunction</code> - triples are allowed to satisfy more than one constraint.
                </li>
              </ul>
              <p>
                These two strategies are equivalent when no triple satisfies more than one constraint.
    In the example above, depending on the strategy being used, someone acting as <span class="hilight-testgrammer lowlight2 top bot">both a programmer and a tester</span> might or might not allow to satisfy the schema.
              </p>

              <p>
                Below are three variants of the example above.
                These each fail when evaluated by one of the strategies.
                Below each example is a workaround which works for the failing validation strategy.
              </p>
              <div style="float:left; max-width: 32%">
                <p>One individual acting as both tester and programmer.</p>
              <pre class="instance turtle pass">
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-testgrammer lowlight2 top bot"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
              <p>fails <code>partition</code>, <span class="hilight-workaround1 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc"><span class="comment"># schema (ShExC)</span>
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:accepted ex:resolved</span>];
  ( <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround1 lowlight2 top new">| <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span>    </span></span>
  <span class="hilight-workaround1 lowlight2 bot new">              <span class="value-constraint">AND @<span class="shape-name">my:ProgrammerShape</span></span></span>
  )
}
</pre>
              <!-- JSON example -->
              <pre class="schema json todo">TODO</pre>
              </div>
              <div style="float:left; max-width: 32%">
                <p>
                  One individual acts can be both a tester and a programmer, another is only a tester.
                </p>
              <pre class="instance turtle pass"><span class="comment"># one tester and one combination </span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="type">inst:</span><span class="constant">Tester2</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-testgrammer lowlight2 top bot"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> .

<span class="type">inst:</span><span class="constant">Tester2</span>              
  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;  
  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
              <p>fails <code>conjunction</code>, <span class="hilight-workaround2 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc"><span class="comment"># schema (ShExC)</span>
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:accepted ex:resolved</span>];
  ( <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround2 lowlight2 top new">| <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span>    </span>
  <span class="hilight-workaround2 lowlight2     new">          <span class="value-constraint">AND NOT @<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">  <span class="predicate">ex:reproducedBy</span> @<span class="shape-name">my:TesterShape</span>    </span>
  <span class="hilight-workaround2 lowlight2     new">              <span class="value-constraint">AND @<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">| <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">          <span class="value-constraint">AND NOT @<span class="shape-name">my:TesterShape</span></span>    </span>
  <span class="hilight-workaround2 lowlight2     new">  <span class="predicate">ex:reproducedBy</span> @<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround2 lowlight2 bot new">              <span class="value-constraint">AND @<span class="shape-name">my:TesterShape</span></span>    </span>
  )
}
</pre>
              <!-- JSON example -->
              <pre class="schema json todo">TODO</pre>
              </div>
              <div style="float:left; max-width: 32%">
                <p>
                  Two individuals can act as both a tester and a programmer.
                </p>
              <pre class="instance turtle pass"><span class="comment"># two combinations</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="type">ex:</span><span class="constant">state</span> <span class="type">ex:</span><span class="constant">accepted</span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> ;
  <span class="type">ex:</span><span class="constant">reproducedBy</span> <span class="hilight-testgrammer lowlight2 bot"><span class="type">inst:</span><span class="constant">Testgrammer45</span></span> .

<span class="type">inst:</span><span class="constant">Testgrammer23</span>                        
  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  
  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> ;                
  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer45</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">foaf:</span><span class="constant">name</span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="type">ex:</span><span class="constant">role</span> <span class="type">ex:</span><span class="constant">testingRole</span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="type">ex:</span><span class="constant">department</span> <span class="type">ex:</span><span class="constant">ProgrammingDepartment</span> .</span></pre>
              <p>fails <code>conjunction</code>, <span class="hilight-workaround3 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc"><span class="comment"># schema (ShExC)</span>
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate">ex:state</span> [<span class="value-constraint">ex:accepted ex:resolved</span>];
  ( <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround3 lowlight2 top new">| <span class="predicate">ex:reproducedBy</span> <span class="value-constraint">@<span class="shape-name">my:TesterShape</span></span>       </span>
  <span class="hilight-workaround3 lowlight2 bot new">              <span class="value-constraint">AND @<span class="shape-name">my:ProgrammerShape</span>{2}</span></span>
  )
}
</pre>
              </div>

              <p style="clear:both;" class="TODO">
                The behavior in these cases currently uses the <code>partition</code> strategy. 
                Please send feedback to <a href="mailto:public-shex@w3.org">public-shex@w3.org</a> with advice and use cases, if the <code>conjunction</code> strategy is better suited for your use cases.
              </p>
            </div>

            </div>
            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-tester", "hilight-programmer", "hilight-testgrammer", "hilight-workaround1", "hilight-workaround2", "hilight-workaround3"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </section>

<!--     <section id="semact"> -->
<!--       <h2>Semantic Actions</h2> -->
<!--       <p> -->
<!--         <code>Semantic actions</code> are pieces of arbitrary code attached to expressions in a shape. -->
<!--         They can be used to signal a validation failure or perform operations with side effects. -->
<!--         (The name "semantic action" comes from their serving a same role as semantic actions in parsers like Antlr or Yacc.) -->
<!--         Below is an example from a standard extension called "<a href="http://shex.io/extensions/Test/">Test</a>" which can only <code class="code">print(msg)</code> or <code class="code">fail(msg)</code>: -->
<!--       </p> -->
<!--         <div id="simple-expressions-example-1" class="example wrapper"> -->
<!--           <\!-\- ShExC example -\-> -->
<!--           <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span> -->
<!-- <span class="shape-name hilight-shapeName lowlight2 top bot">my:IssueShape</span> { -->
<!--   <span class="state      lowlight1 top bot"><span class="predicate">ex:state</span> [<span class="stateValue lowlight2 top bot value-constraint">ex:unassigned ex:assigned</span>]</span>; -->
<!--   <span class="reportedBy lowlight1 top bot"><span class="predicate">ex:reportedBy</span> <span class="value-constraint">@</span><span class="user lowlight2 top bot shape-name">my:UserShape</span></span> -->
<!-- } -->

<!-- <span class="shape-name">my:UserShape</span> { -->
<!--   <span class="eitherOr   lowlight2 top">(                              </span> -->
<!--      <span class="name       lowlight1 top bot"><span class="predicate">foaf:name</span> <span class="value-constraint">xsd:string</span></span> <span class="code">%test:{ print(o) %}</span> -->
<!--   <span class="eitherOr   lowlight2 bot">                               </span> -->
<!--   <span class="eitherOr   lowlight2 top">  |                            </span> -->
<!--       <span class="gname      lowlight1 top bot"><span class="predicate">foaf:givenName</span> <span class="value-constraint">xsd:string</span>+</span>; -->
<!--       <span class="fname      lowlight1 top bot"><span class="predicate">foaf:familyName</span> <span class="value-constraint">xsd:string</span></span> <span class="code">%test:{ fail("doomed") %}</span> -->
<!--   <span class="eitherOr   lowlight2 bot">);                             </span> -->
<!--   <span class="mbox       lowlight1 top bot"><span class="predicate">foaf:mbox</span> <span class="value-constraint">IRI</span></span> -->
<!-- }</pre> -->

<!--           <\!-\- JSON example -\-> -->
<!--           <pre class="schema json" style="float:left;"><span class="comment">// schema (JSON)</span> -->
<!-- { "type": "Schema", -->
<!--   "shapes": { -->
<!--     <span class="shape-name hilight-shapeName lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape", -->
<!--       "expression": { "type": "group", -->
<!--         "expressions": [ -->
<!--           <span class="state      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "ex:state"</span>,</span> -->
<!--           <span class="state      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint",              </span></span> -->
<!--           <span class="state      lowlight1    ">  <span class="value-constraint">  "values": [ <span class="stateValue lowlight2 top bot value-constraint">"ex:unassigned", "ex:assigned"</span> ]</span></span> -->
<!--           <span class="state      lowlight1    ">  <span class="value-constraint">}                                             </span></span> -->
<!--           <span class="state      lowlight1 bot">},                                              </span> -->
<!--           <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "ex:reportedBy"</span>,</span> -->
<!--           <span class="reportedBy lowlight1    ">  <span class="value-constraint">"value": { "type": "ShapeRef",</span> <span class="value-constraint">"reference": <span class="user lowlight2 top bot">"my:UserShape"</span></span> }</span> -->
<!--           <span class="reportedBy lowlight1 bot">}                                               </span> -->
<!--         ] -->
<!--       } -->
<!--     }, -->
<!--     <span class="shape-name">"my:UserShape"</span>: { "type": "Shape", -->
<!--       "expression": { "type": "group", -->
<!--         "expressions": [ -->
<!--           { "type": "OneOf", -->
<!--             "expressions": [ -->
<!--               <span class="eitherOr   lowlight2 top">                                                                  </span> -->
<!--               <span class="name       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:name"</span>,        </span> -->
<!--               <span class="name       lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>, -->
<!--                 "semActs": [ -->
<!--                   { "type": "SemAct", "name": "test:", "code": " print(o) " } -->
<!--                 ] }</span>, -->
<!--               <span class="eitherOr   lowlight2 bot">                                                                  </span> -->
<!--               <span class="eitherOr   lowlight2 top">                                                                  </span> -->
<!--               { "type": "group", -->
<!--                 "expressions": [ -->
<!--                   <span class="gname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:givenName"</span>,  </span> -->
<!--                   <span class="gname      lowlight1    ">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>,</span> -->
<!--                   <span class="gname      lowlight1 bot">  "min": 1, "max": "*" },                                     </span> -->
<!--                   <span class="fname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:familyName"</span>,  </span> -->
<!--                   <span class="fname      lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>, -->
<!--                     "semActs": [ { "type": "SemAct", "name": "test:", -->
<!--                         "code": " fail(\"doomed\") " -->
<!--                       } -->
<!--                     ] }</span> -->
<!--                 ] -->
<!--               } -->
<!--               <span class="eitherOr   lowlight2 bot">                                                                  </span> -->
<!--             ] -->
<!--           }, -->
<!--           <span class="mbox       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate">"predicate": "foaf:mbox"</span>, </span> -->
<!--           <span class="mbox       lowlight1 bot">  <span class="value-constraint">"value": { "type": "NodeConstraint", "nodeKind": "iri" }</span> }</span> -->
<!--         ] -->
<!--       } -->
<!--     } -->
<!--   } -->
<!-- }</pre> -->
<!--           <div class="verticalDivider"><\!-\- acts as a divider -\-></div> -->
<!--           <div style="float:left;"> -->
<!--           <pre class="instance turtle pass"><span class="comment"># passing data</span> -->
<!-- <span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">http://ex.example/#</span><span class="comment"> -->
<!-- </span><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="function-name">http://xmlns.com/foaf/</span> -->
<!-- <span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">http://www.w3.org/2001/XMLSchema#</span><span class="comment"> -->
<!-- </span> -->
<!-- <span class="function-name">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ; -->
<!--     <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="stateValue lowlight2 top bot"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> ; -->
<!--     <span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>   <span class="user lowlight2 top bot"><span class="function-name">inst:User2</span></span></span> . -->

<!-- <span class="user lowlight2 top bot"><span class="function-name">inst:User2</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ; -->
<!--     <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span></span> ; -->
<!--     <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span></span> ; -->
<!--     <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span></span>.</pre> -->
<!--           <pre class="instance turtle fail"><span class="comment"># failing data</span> -->
<!-- <span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="function-name">http://ex.example/#</span><span class="comment"> -->
<!-- </span><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="function-name">http://xmlns.com/foaf/</span> -->
<!-- <span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="function-name">http://www.w3.org/2001/XMLSchema#</span><span class="comment"> -->
<!-- </span> -->
<!-- <span class="function-name">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ; -->
<!--     <span class="state lowlight1 top bot"><span class="type">ex:</span><span class="constant">state</span>        <span class="stateValue lowlight2 top bot"><span class="type">ex:</span><span class="constant errorSite">unsinged</span></span></span> ; -->
<!--     <span class="reportedBy lowlight1 top bot"><span class="type">ex:</span><span class="constant">reportedBy</span>   <span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span></span> . -->

<!-- <span class="user lowlight2 top bot"><span class="function-name">inst:User4</span></span> <span class="keyword">a</span> <span class="type">foaf:</span><span class="constant">Person</span> ; -->
<!--     <span class="name lowlight1 top bot"><span class="type">foaf:</span><span class="constant">name</span>       <span class="string top bot">"Bob Smith"</span>, <span class="string top bot errorSite">"Robert Smith"</span></span> ; -->
<!--     <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span><span class="keyword"></span></span></span> ; -->
<!--     <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> <span class="keyword"></span></span></span>.</pre> -->
<!--   </div> -->
<!--           <div style="clear:both;"></div> -->
<!--       </div> -->
<!--       <script type="text/javascript"> -->
<!--       <\!-\- -->
<!-- prepareHighlight(["oneOrMore", "IRI", "stateValue", "user", "string"], "highlight2", "lowlight2"); -->
<!-- prepareHighlight(["state", "reportedBy", "name", "mbox"], "highlight1", "lowlight1"); -->
<!--       -\-> -->
<!--       </script> -->
<!--     </section> -->
  </section>

      <section id="relationship">
        <h2>Relationship of ShEx to RDF and OWL</h2>
    	<p>
        ShEx is designed to fill a long-recognized gap in Semantic Web technology.
        The Resource Description Framework language (RDF), and the more expressive Web Ontology Language (OWL), were designed for making statements about things "in the world" or, more precisely, about things in a conceptual caricature of the world.
        Things in that caricature may include anything from people, books, abstract ideas, and Web pages to planets or refrigerators.
        By design, RDF and OWL were optimized for aggregating information from multiple sources and for processing incomplete information.
        If a model in OWL says that a person has two biological parents, and only one parent is described in a given graph, an OWL processor will not report a mismatch between the model and the graph because the second parent is assumed to exist even if it is not described in the data.
        In other words, the graph <em>could</em> describe the second parent if more triples were supplied.
        In logic, this is called the "open world assumption".
    	</p>
    	<p>
        In contrast, real-world data applications must often test the integrity of their data by flagging such omissions as non-conformant, and the ShEx language was designed for use in making such conformance tests.
        Where an RDF graph describes things in the caricature of the world, a ShEx schema describes things that are actually "in the data" of RDF data graphs.
        A shape expression refers to an RDF graph as a collection of abstract-syntactic entities: IRIs, blank nodes, literals, and triples, seen either as incoming arcs or outgoing arcs, with subjects, predicates, and objects.
        Inasmuch as a ShEx schema is tested against a given RDF data graph, and does not consider potential but unknown data outside of that graph, the ShEx model of conformance testing follows the "closed world assumption".
        That said, a ShEx schema can specify a "closed" interpretation, meaning that data can conform only if it includes only triples specified in the schema, or an "open" interpretation, meaning that data triples not specified in the schema are simply ignored.
    	</p>
    	<p>
        It should be noted that a ShEx schema is valid as an RDF expression in an open-world sense.
        In this interpretation, a ShEx schema describes something in the world, where that "something" happens to be the set of abstract-syntactic components that comprise an RDF graph.
        However, such an interpretation is of no use in practical terms.
        The utility of a ShEx schema derives from its use for testing against the abstract-syntactic components "in the data" of an RDF graph to yield a conformance test result.
    	</p>
    	<p>
        It should also be noted that a ShEx schema is not an RDF schema, even though both describe RDF data.
        "RDF Schema" is actually a language for defining RDF vocabularies and for specifying semantic relationships between terms that can be used to infer relationships between RDF resources.[[!rdf-schema]]
        A ShEx schema provides structural constraints, analogously to relational or XML schemas.
    	</p>
        <p>
          @@@Sentence pointing to https://shexspec.github.io/ns/
        </p>
      </section>

      <section id="namespaces" class="appendix">
        <h2>Namespaces in this Document</h2>

          <p>
            The following namespace prefixes are frequently used in this document:
          </p>
          <table style="border-collapse: collapse; border-color: #000000" border="1" cellpadding="5">
            <tr>
              <th>Prefix</th>
              <th>Namespace</th>
            </tr>
            <!-- tr>
              <td>sh:</td>
              <td>http://www.w3.org/ns/shacl#</td>
            </tr -->
            <tr>
              <td>rdf:</td>
              <td>http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
            </tr>
            <tr>
              <td>xsd:</td>
              <td>http://www.w3.org/2001/XMLSchema#</td>
            </tr>
            <tr>
              <th colspan="2">Example namespaces</th>
              <th>Used in</th>
            </tr>
            <tr>
              <td>foaf:</td>
              <td>http://xmlns.com/foaf/0.1/</td>
              <td>Friend Of A Friend vocabulary</td>
            </tr>
            <tr>
              <td>ex:</td>
              <td>http://ex.example/ns#</td>
              <td>random application ontology</td>
            </tr>
            <tr>
              <td>my:</td>
              <td>http://my.example/ns#</td>
              <td>shape declarations</td>
            </tr>
            <tr>
              <td>inst:</td>
              <td>http://inst.example/ns#</td>
              <td>instance data</td>
            </tr>
            <tr>
              <td>test:</td>
              <td>http://shex.io/extensions/Test/</td>
              <td>Test language for semantic actions</td>
            </tr>
          </table>

        <script type="application/javascript">
  var bodyKeypressCallbacks = {};

  /* a form like
        <form id="langOptions" action="">View as: <input type="radio" name="presLang" value="turtle" checked="checked">ShExC (press 'c')</input> <input type="radio" name="presLang" value="json">JSON (press 'j')</input> .</form>
  controls display of sections like
  <pre class="schema shexc">...</pre>
  <pre class="schema json">...</pre>
   */
  [
    { lookIn: ".schema", form: "#langOptions", radioName: "presLang", keys:
      { 74: "json", 106: "json", 67: "shexc", 99: "shexc" }
    }
  ].forEach(function (x) {

    /* In lookIn, reveal classes selected by radioName; hide others.
     */
    function revealClass (lookIn, form, radioName) {
            $(lookIn+"."+$(form+" input[name="+radioName+"]").not(":checked").val()).hide();
            $(lookIn+"."+$(form+" input[name="+radioName+"]" +    ":checked").val()).show();
          }
    /* Look in all lookIn containers for the height different of from and to targets.
     */
          function adjustHeight (lookIn, from, to) {
            var visibleTop = $(window).scrollTop();
            var all = $(lookIn+"."+from); // all containers of from (and presumably, to)
            var adj = 0;
            for (var i = 0; i < all.length; ++i) {
              var elt = all.slice(i, i+1);
              if (elt.offset().top >= visibleTop) // stop when we pass the current scroll top.
    break;
              adj += elt.siblings("."+to).height() - elt.height();
            }
            $(window).scrollTop($(window).scrollTop() + adj); // move the scroll top.
          }

          var inputs = $(x.form + " input[name="+x.radioName+"]");
    // Listen for checkbox changes.
          inputs.change(function() {revealClass(x.lookIn, x.form, x.radioName);})
    // Show only the currently selected class.
          revealClass(x.lookIn, x.form, x.radioName);
    // Assign callbacks the the associated keycodes.
    Object.keys(x.keys).forEach(function (k) {
      bodyKeypressCallbacks[k] = function () {
        // If the corresponding radio button isn't already selected,
              if(!inputs.filter("[value="+x.keys[k]+"]").is(":checked")) {
    // adjust the height from the current class to the new class;
    adjustHeight(x.lookIn, $("input[name="+x.radioName+"]:checked", x.form).val(), ""+x.keys[k]+"");
    // set it as "checked";
    inputs.filter("[value="+x.keys[k]+"]").prop("checked", true); // .change() did nothing
    // swap which is displayed.
    revealClass(x.lookIn, x.form, x.radioName);
              }
        return false;
      };
    });
  });
        $("html > body").keypress(function (evt) {
          if (evt.ctrlKey)
            return true; // don't interfere with browser control keys.
    if (evt.which in bodyKeypressCallbacks)
      return bodyKeypressCallbacks[evt.which]();
    return true;
        });
        </script>

    </body>
</html>
